[{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ActivityLogDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\AnalyticsGenerationButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\BatchPrizeCreator.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\CircleSelectionMap.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ErrorBoundary.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\GlobalErrorBoundary.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\Layout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\LoginForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\MapComponent.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\PrivateRoute.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ProtectedRoute.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\Skeleton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\VirtualizedList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\accordion.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\alert-dialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\alert.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\aspect-ratio.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\avatar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\badge.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\breadcrumb.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\button.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\calendar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\card.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\carousel.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\checkbox.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\collapsible.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\command.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\confirm-dialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\context-menu.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\dialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\drawer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\dropdown-menu.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\empty-state.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\form.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\global-search.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\hover-card.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\input-otp.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\input.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\keyboard-shortcuts-dialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\label.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\loading-skeletons.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\menubar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\multi-select.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\navigation-menu.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\page-header.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\pagination.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\popover.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\progress.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\radio-group.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\resizable.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\scroll-area.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\search-filter-bar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\select.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\sidebar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\skeleton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\slider.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\sonner.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\stat-card.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\switch.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\table.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\tabs.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\textarea.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\theme-toggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\toggle-group.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\toggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\components\\ui\\tooltip.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\constants\\statuses.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\contexts\\AuthContext.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\hooks\\use-mobile.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\hooks\\useKeyboardShortcuts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\hooks\\useQueryData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\hooks\\useRealtimeUpdates.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\i18n.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\lib\\mockData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\lib\\utils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\ABTestingManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\AchievementsManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\ActivityLog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\AdMobDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\AnalyticsPage_Complete.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'getUserStats' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":41},{"ruleId":"no-unused-vars","severity":2,"message":"'getPrizeStats' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":56},{"ruleId":"no-unused-vars","severity":2,"message":"'getRewardStats' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":6,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":72},{"ruleId":"no-unused-vars","severity":2,"message":"'mapBackendDashboardStats' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":34},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":31,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":15},{"ruleId":"no-unused-vars","severity":2,"message":"'backendPeriod' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":39,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":26}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from \"react\";\nimport { toast } from \"sonner\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"../components/ui/card\";\nimport { Button } from \"../components/ui/button\";\nimport { RefreshCw, TrendingUp, Users, Target, DollarSign, AlertCircle, Download } from \"lucide-react\";\nimport { getDashboardStats, getUserStats, getPrizeStats, getRewardStats } from \"../services/dashboard\";\nimport { mapBackendDashboardStats } from \"../utils/mappers\";\nimport {\n  LineChart, Line, BarChart, Bar, PieChart, Pie, Cell,\n  XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer\n} from \"recharts\";\n\nconst COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'];\n\n// Convert period from frontend format to backend format\nconst convertPeriod = (period) => {\n  const periodMap = {\n    'day': 'day',\n    'week': 'week',\n    'month': 'month',\n    'year': 'year'\n  };\n  return periodMap[period] || 'week';\n};\n\nexport default function AnalyticsPage() {\n  const [period, setPeriod] = useState(\"week\");\n  const [activeTab, setActiveTab] = useState(\"overview\");\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState(null);\n  const [error, setError] = useState(null);\n\n  // Load analytics data\n  const loadAnalytics = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const backendPeriod = convertPeriod(period);\n      const stats = await getDashboardStats(period);\n\n      setData(stats);\n    } catch (err) {\n      console.error('Error loading analytics:', err);\n      setError(err.message);\n      toast.error('Erreur lors du chargement des analytics');\n    } finally {\n      setLoading(false);\n    }\n  }, [period]);\n\n  // Load data on period change\n  useEffect(() => {\n    loadAnalytics();\n  }, [loadAnalytics]);\n\n  // Extract data from dashboard stats\n  const stats = data || {};\n  const overview = stats.users ? {\n    totalUsers: stats.users?.total || 0,\n    activeUsers: stats.users?.active || 0,\n    newUsers: stats.users?.new || 0,\n    totalCaptures: stats.gameplay?.totalCaptures || 0,\n    totalRedemptions: stats.rewards?.redemptions || 0,\n    conversionRate: stats.gameplay?.totalCaptures > 0\n      ? ((stats.rewards?.redemptions || 0) / stats.gameplay.totalCaptures) * 100\n      : 0,\n    revenue: stats.monetization?.revenue || 0,\n  } : {};\n\n  const chartData = stats.dailyActivity || [];\n  const details = {\n    topUsers: stats.users?.topActive || [],\n    topPrizes: stats.prizes?.topClaimed || [],\n    recentActivity: stats.gameplay?.recent || []\n  };\n\n  const exportData = useCallback(() => {\n    const data = {\n      overview,\n      charts: chartData,\n      details,\n      period,\n      timestamp: new Date()\n    };\n    const json = JSON.stringify(data, null, 2);\n    const blob = new Blob([json], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `analytics-${period}-${Date.now()}.json`;\n    a.click();\n    toast.success('Analytics export├®es avec succ├¿s');\n  }, [overview, chartData, details, period]);\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-3xl font-bold\">Analytics Dashboard</h1>\n        <div className=\"flex gap-2\">\n          <select\n            value={period}\n            onChange={e => setPeriod(e.target.value)}\n            className=\"px-4 py-2 border rounded-md bg-white\"\n          >\n            <option value=\"day\">Aujourd'hui</option>\n            <option value=\"week\">Cette semaine</option>\n            <option value=\"month\">Ce mois</option>\n            <option value=\"year\">Cette ann├®e</option>\n          </select>\n          <Button onClick={loadAnalytics} disabled={loading} variant=\"outline\">\n            <RefreshCw className={`mr-2 h-4 w-4 ${loading ? \"animate-spin\" : \"\"}`} />\n            Actualiser\n          </Button>\n          <Button onClick={exportData} disabled={loading} variant=\"outline\">\n            <Download className=\"mr-2 h-4 w-4\" />\n            Exporter\n          </Button>\n        </div>\n      </div>\n\n      {loading && <div className=\"text-center py-8\">Chargement des donn├®es...</div>}\n\n      {!loading && (\n        <>\n          {/* KPI Cards */}\n          <div className=\"grid gap-4 md:grid-cols-4\">\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                  <Users className=\"h-4 w-4\" /> Utilisateurs Actifs\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{overview.activeUsers ?? 0}</div>\n                <p className=\"text-xs text-gray-500 mt-1\">+{overview.newUsers ?? 0} nouveaux</p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                  <Target className=\"h-4 w-4\" /> Captures\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{overview.totalCaptures ?? 0}</div>\n                <p className=\"text-xs text-gray-500 mt-1\">Tentatives r├®ussies</p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                  <TrendingUp className=\"h-4 w-4\" /> Conversion\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{(overview.conversionRate ?? 0).toFixed(1)}%</div>\n                <p className=\"text-xs text-gray-500 mt-1\">Taux de succ├¿s</p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                  <DollarSign className=\"h-4 w-4\" /> Revenus\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{(overview.revenue ?? 0).toLocaleString()} TND</div>\n                <p className=\"text-xs text-gray-500 mt-1\">R├®demptions</p>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Tab Navigation */}\n          <div className=\"flex gap-2 border-b\">\n            {['overview', 'users', 'prizes', 'revenue'].map(tab => (\n              <button\n                key={tab}\n                onClick={() => setActiveTab(tab)}\n                className={`px-4 py-2 font-medium text-sm border-b-2 transition ${activeTab === tab\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-600 hover:text-gray-900'\n                  }`}\n              >\n                {tab.charAt(0).toUpperCase() + tab.slice(1)}\n              </button>\n            ))}\n          </div>\n\n          {/* Overview Tab */}\n          {activeTab === 'overview' && (\n            <>\n              <Card>\n                <CardHeader>\n                  <CardTitle>Activit├® Quotidienne</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {stats?.dailyActivity && stats.dailyActivity.length > 0 ? (\n                    <ResponsiveContainer width=\"100%\" height={300}>\n                      <LineChart data={stats.dailyActivity}>\n                        <CartesianGrid strokeDasharray=\"3 3\" />\n                        <XAxis dataKey=\"date\" />\n                        <YAxis />\n                        <Tooltip />\n                        <Legend />\n                        <Line type=\"monotone\" dataKey=\"captures\" stroke=\"#3b82f6\" name=\"Captures\" isAnimationActive={false} />\n                        <Line type=\"monotone\" dataKey=\"users\" stroke=\"#10b981\" name=\"Utilisateurs\" isAnimationActive={false} />\n                      </LineChart>\n                    </ResponsiveContainer>\n                  ) : (\n                    <div className=\"h-[300px] flex items-center justify-center text-gray-500\">Aucune donn├®e</div>\n                  )}\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Croissance des Utilisateurs</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {stats?.userGrowth && stats.userGrowth.length > 0 ? (\n                    <ResponsiveContainer width=\"100%\" height={300}>\n                      <BarChart data={stats.userGrowth}>\n                        <CartesianGrid strokeDasharray=\"3 3\" />\n                        <XAxis dataKey=\"period\" />\n                        <YAxis />\n                        <Tooltip />\n                        <Bar dataKey=\"total\" fill=\"#3b82f6\" name=\"Total\" isAnimationActive={false} />\n                        <Bar dataKey=\"new\" fill=\"#10b981\" name=\"Nouveaux\" isAnimationActive={false} />\n                      </BarChart>\n                    </ResponsiveContainer>\n                  ) : (\n                    <div className=\"h-[300px] flex items-center justify-center text-gray-500\">Aucune donn├®e</div>\n                  )}\n                </CardContent>\n              </Card>\n            </>\n          )}\n\n          {/* Users Tab */}\n          {activeTab === 'users' && (\n            <>\n              <div className=\"grid gap-4 md:grid-cols-3\">\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Total Utilisateurs</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\">{overview.totalUsers ?? 0}</div>\n                  </CardContent>\n                </Card>\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Nouveaux (P├®riode)</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\">{overview.newUsers ?? 0}</div>\n                  </CardContent>\n                </Card>\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Actifs</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\">{overview.activeUsers ?? 0}</div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Top 10 Utilisateurs</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {details.topUsers && details.topUsers.length > 0 ? (\n                    <div className=\"space-y-2\">\n                      {details.topUsers.map((user, idx) => (\n                        <div key={idx} className=\"flex justify-between items-center p-2 bg-gray-50 rounded\">\n                          <span className=\"font-medium\">#{idx + 1} {user.username}</span>\n                          <span className=\"text-sm text-gray-600\">{user.captures} captures</span>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-gray-500\">Aucune donn├®e</div>\n                  )}\n                </CardContent>\n              </Card>\n            </>\n          )}\n\n          {/* Prizes Tab */}\n          {activeTab === 'prizes' && (\n            <>\n              <div className=\"grid gap-4 md:grid-cols-3\">\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Prix Totaux</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\">{overview.totalPrizes ?? 0}</div>\n                  </CardContent>\n                </Card>\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Captur├®s</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\">{overview.claimedPrizes ?? 0}</div>\n                  </CardContent>\n                </Card>\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Taux Capture</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\">{overview.totalPrizes > 0 ? ((overview.claimedPrizes / overview.totalPrizes) * 100).toFixed(1) : 0}%</div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Distribution des Prix par Cat├®gorie</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {stats.prizes?.categoryDistribution && stats.prizes.categoryDistribution.length > 0 ? (\n                    <ResponsiveContainer width=\"100%\" height={300}>\n                      <PieChart>\n                        <Pie data={stats.prizes.categoryDistribution} dataKey=\"value\" nameKey=\"name\" cx=\"50%\" cy=\"50%\" outerRadius={100} label>\n                          {stats.prizes.categoryDistribution.map((_, idx) => <Cell key={idx} fill={COLORS[idx % COLORS.length]} />)}\n                        </Pie>\n                        <Tooltip />\n                        <Legend />\n                      </PieChart>\n                    </ResponsiveContainer>\n                  ) : (\n                    <div className=\"h-[300px] flex items-center justify-center text-gray-500\">Aucune donn├®e</div>\n                  )}\n                </CardContent>\n              </Card>\n            </>\n          )}\n\n          {/* Revenue Tab */}\n          {activeTab === 'revenue' && (\n            <>\n              <div className=\"grid gap-4 md:grid-cols-3\">\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Revenus Totaux</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\">{(overview.revenue ?? 0).toLocaleString()} TND</div>\n                  </CardContent>\n                </Card>\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Revenu Moyen/Utilisateur</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\">{overview.totalUsers > 0 ? (overview.revenue / overview.totalUsers).toFixed(2) : 0} TND</div>\n                  </CardContent>\n                </Card>\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">R├®demptions</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"text-2xl font-bold\">{overview.totalRedemptions ?? 0}</div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Tendance Revenus</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {chartData.dailyActivity && chartData.dailyActivity.length > 0 ? (\n                    <ResponsiveContainer width=\"100%\" height={300}>\n                      <LineChart data={chartData.dailyActivity}>\n                        <CartesianGrid strokeDasharray=\"3 3\" />\n                        <XAxis dataKey=\"date\" />\n                        <YAxis />\n                        <Tooltip formatter={value => `${value.toLocaleString()}`} />\n                        <Line type=\"monotone\" dataKey=\"points\" stroke=\"#10b981\" name=\"Revenus\" />\n                      </LineChart>\n                    </ResponsiveContainer>\n                  ) : (\n                    <div className=\"h-[300px] flex items-center justify-center text-gray-500\">Aucune donn├®e</div>\n                  )}\n                </CardContent>\n              </Card>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\AntiCheatDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\Dashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'formatDate' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":51,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used.","line":59,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":55}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../components/ui/card';\r\nimport { Button } from '../components/ui/button';\r\nimport { Badge } from '../components/ui/badge';\r\nimport {\r\n  Users,\r\n  Trophy,\r\n  CreditCard,\r\n  DollarSign,\r\n  Building2,\r\n  Coins,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  Activity,\r\n  RefreshCw,\r\n  ClipboardList,\r\n  Zap,\r\n  MapPin,\r\n  Clock,\r\n  Target,\r\n  Gift,\r\n  ShoppingBag,\r\n  AlertCircle,\r\n  CheckCircle,\r\n  Wifi,\r\n  WifiOff,\r\n  ArrowUpRight,\r\n  ArrowDownRight,\r\n  BarChart3,\r\n  PieChart,\r\n} from 'lucide-react';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  AreaChart,\r\n  Area,\r\n  BarChart,\r\n  Bar,\r\n  PieChart as RechartsPie,\r\n  Pie,\r\n  Cell,\r\n  Legend,\r\n} from 'recharts';\r\nimport { getDashboardStats, getRecentActivity, getSystemHealth } from '../services/dashboard';\r\nimport ActivityLogDialog from '../components/ActivityLogDialog';\r\nimport { formatDate, formatRelativeDate } from '../utils/dates';\r\nimport { toast } from 'sonner';\r\nimport wsService from '../services/websocket';\r\n\r\n// Color palette for charts\r\nconst COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'];\r\n\r\n// Stat Card with trend indicator\r\nfunction StatCard({ title, value, subtitle, icon: Icon, trend, trendValue, color = 'blue', loading }) {\r\n  const colorClasses = {\r\n    blue: 'bg-blue-50 text-blue-600',\r\n    green: 'bg-green-50 text-green-600',\r\n    purple: 'bg-purple-50 text-purple-600',\r\n    orange: 'bg-orange-50 text-orange-600',\r\n    pink: 'bg-pink-50 text-pink-600',\r\n    red: 'bg-red-50 text-red-600',\r\n  };\r\n\r\n  return (\r\n    <Card className=\"relative overflow-hidden\">\r\n      <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n        <CardTitle className=\"text-sm font-medium text-gray-600\">{title}</CardTitle>\r\n        <div className={`p-2 rounded-lg ${colorClasses[color]}`}>\r\n          <Icon className=\"h-4 w-4\" />\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {loading ? (\r\n          <div className=\"h-8 bg-gray-200 animate-pulse rounded w-24\"></div>\r\n        ) : (\r\n          <>\r\n            <div className=\"text-2xl font-bold\">{typeof value === 'number' ? value.toLocaleString() : value}</div>\r\n            <div className=\"flex items-center justify-between mt-1\">\r\n              <p className=\"text-xs text-muted-foreground\">{subtitle}</p>\r\n              {trend && (\r\n                <div className={`flex items-center text-xs ${trend === 'up' ? 'text-green-600' : 'text-red-600'}`}>\r\n                  {trend === 'up' ? <ArrowUpRight className=\"h-3 w-3\" /> : <ArrowDownRight className=\"h-3 w-3\" />}\r\n                  <span>{trendValue}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\n// Live Activity Feed Component\r\nfunction LiveActivityFeed({ activities, wsConnected }) {\r\n  return (\r\n    <Card className=\"h-full\">\r\n      <CardHeader className=\"pb-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <Activity className=\"h-5 w-5\" />\r\n              Activit├® en Direct\r\n            </CardTitle>\r\n            <CardDescription>Derni├¿res actions sur la plateforme</CardDescription>\r\n          </div>\r\n          <Badge variant={wsConnected ? 'default' : 'secondary'} className=\"flex items-center gap-1\">\r\n            {wsConnected ? <Wifi className=\"h-3 w-3\" /> : <WifiOff className=\"h-3 w-3\" />}\r\n            {wsConnected ? 'Live' : 'Polling'}\r\n          </Badge>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"space-y-3 max-h-[350px] overflow-y-auto pr-2\">\r\n          {activities && activities.length > 0 ? (\r\n            activities.map((item, index) => (\r\n              <div\r\n                key={item._id || index}\r\n                className=\"flex items-start gap-3 p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors\"\r\n              >\r\n                <div className={`w-2 h-2 mt-2 rounded-full flex-shrink-0 ${item.success !== false ? 'bg-green-500' : 'bg-red-500'\r\n                  }`}></div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <p className=\"text-sm font-medium text-gray-900 truncate\">\r\n                      {item.action || item.message || 'Action'}\r\n                    </p>\r\n                    {item.category && (\r\n                      <Badge variant=\"outline\" className=\"text-xs\">{item.category}</Badge>\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-gray-500 mt-0.5\">\r\n                    {item.description || item.resource || ''}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-400 mt-1\">\r\n                    {formatRelativeDate(item.createdAt || item.timestamp)}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"text-center text-gray-500 py-12\">\r\n              <Activity className=\"h-12 w-12 mx-auto text-gray-300 mb-3\" />\r\n              <p>Aucune activit├® r├®cente</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\n// System Health Component\r\nfunction SystemHealth({ health, loading }) {\r\n  const statusColors = {\r\n    healthy: 'text-green-600 bg-green-100',\r\n    degraded: 'text-yellow-600 bg-yellow-100',\r\n    error: 'text-red-600 bg-red-100',\r\n    unknown: 'text-gray-600 bg-gray-100',\r\n  };\r\n\r\n  const formatUptime = (seconds) => {\r\n    if (!seconds) return '0s';\r\n    const days = Math.floor(seconds / 86400);\r\n    const hours = Math.floor((seconds % 86400) / 3600);\r\n    const mins = Math.floor((seconds % 3600) / 60);\r\n    if (days > 0) return `${days}j ${hours}h`;\r\n    if (hours > 0) return `${hours}h ${mins}m`;\r\n    return `${mins}m`;\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader className=\"pb-3\">\r\n        <CardTitle className=\"flex items-center gap-2 text-base\">\r\n          <Target className=\"h-4 w-4\" />\r\n          ├ëtat du Syst├¿me\r\n        </CardTitle>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {loading ? (\r\n          <div className=\"space-y-2\">\r\n            <div className=\"h-6 bg-gray-200 animate-pulse rounded\"></div>\r\n            <div className=\"h-6 bg-gray-200 animate-pulse rounded w-3/4\"></div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-sm text-gray-600\">Status</span>\r\n              <Badge className={statusColors[health?.status || 'unknown']}>\r\n                {health?.status === 'healthy' ? (\r\n                  <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n                ) : (\r\n                  <AlertCircle className=\"h-3 w-3 mr-1\" />\r\n                )}\r\n                {health?.status || 'Inconnu'}\r\n              </Badge>\r\n            </div>\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-sm text-gray-600\">Uptime</span>\r\n              <span className=\"text-sm font-medium\">{formatUptime(health?.uptime)}</span>\r\n            </div>\r\n            {health?.services && Object.entries(health.services).map(([service, status]) => (\r\n              <div key={service} className=\"flex items-center justify-between\">\r\n                <span className=\"text-sm text-gray-600 capitalize\">{service}</span>\r\n                <div className={`w-2 h-2 rounded-full ${status ? 'bg-green-500' : 'bg-red-500'}`}></div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default function Dashboard() {\r\n  const [stats, setStats] = useState(null);\r\n  const [activity, setActivity] = useState([]);\r\n  const [health, setHealth] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [showActivityDialog, setShowActivityDialog] = useState(false);\r\n  const [wsConnected, setWsConnected] = useState(false);\r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n  const [selectedPeriod, setSelectedPeriod] = useState('7d');\r\n\r\n  // Load dashboard data\r\n  const loadDashboard = useCallback(async (showToast = false) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const [dashboardStats, recentActivity, systemHealth] = await Promise.all([\r\n        getDashboardStats(selectedPeriod),\r\n        getRecentActivity(15),\r\n        getSystemHealth(),\r\n      ]);\r\n\r\n      setStats(dashboardStats);\r\n      setActivity(recentActivity);\r\n      setHealth(systemHealth);\r\n      setLastUpdate(new Date());\r\n\r\n      if (showToast) {\r\n        toast.success('Dashboard actualis├®');\r\n      }\r\n    } catch (err) {\r\n      console.error('Erreur chargement dashboard:', err);\r\n      setError(err.message);\r\n      if (showToast) {\r\n        toast.error(\"Erreur lors de l'actualisation\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [selectedPeriod]);\r\n\r\n  // WebSocket setup for real-time updates\r\n  useEffect(() => {\r\n    loadDashboard();\r\n\r\n    // Setup WebSocket listeners\r\n    const handleStatsUpdate = (data) => {\r\n      console.log('Stats update received:', data);\r\n      if (data.stats) {\r\n        setStats(prev => ({ ...prev, ...data.stats }));\r\n      }\r\n      setLastUpdate(new Date());\r\n    };\r\n\r\n    const handleCaptureCreated = (data) => {\r\n      console.log('Capture created:', data);\r\n      setActivity(prev => [\r\n        {\r\n          action: 'Nouvelle capture',\r\n          description: data.prize?.name || 'Prix capture',\r\n          createdAt: new Date(),\r\n          success: true,\r\n          category: 'capture'\r\n        },\r\n        ...prev.slice(0, 14)\r\n      ]);\r\n      setStats(prev => prev ? {\r\n        ...prev,\r\n        captures: {\r\n          ...prev.captures,\r\n          total: (prev.captures?.total || 0) + 1,\r\n          today: (prev.captures?.today || 0) + 1,\r\n        }\r\n      } : prev);\r\n    };\r\n\r\n    const handleRedemptionCreated = (data) => {\r\n      console.log('Redemption created:', data);\r\n      setActivity(prev => [\r\n        {\r\n          action: 'Nouvelle redemption',\r\n          description: data.reward?.name || 'R├®compense ├®chang├®e',\r\n          createdAt: new Date(),\r\n          success: true,\r\n          category: 'redemption'\r\n        },\r\n        ...prev.slice(0, 14)\r\n      ]);\r\n    };\r\n\r\n    const handleUserUpdate = (data) => {\r\n      console.log('User update:', data);\r\n      if (data.type === 'new_user') {\r\n        setStats(prev => prev ? {\r\n          ...prev,\r\n          users: {\r\n            ...prev.users,\r\n            total: (prev.users?.total || 0) + 1,\r\n            new: (prev.users?.new || 0) + 1,\r\n          }\r\n        } : prev);\r\n      }\r\n    };\r\n\r\n    const handleConnectionStatus = (data) => {\r\n      setWsConnected(data.connected);\r\n      if (data.connected) {\r\n        console.log('WebSocket connected to dashboard');\r\n        wsService.subscribeToDashboard();\r\n      }\r\n    };\r\n\r\n    // Register WebSocket listeners\r\n    const unsubStats = wsService.on('stats_update', handleStatsUpdate);\r\n    const unsubCapture = wsService.on('capture_created', handleCaptureCreated);\r\n    const unsubRedemption = wsService.on('redemption_created', handleRedemptionCreated);\r\n    const unsubUser = wsService.on('user_update', handleUserUpdate);\r\n    const unsubConnection = wsService.on('connection_status', handleConnectionStatus);\r\n\r\n    // Subscribe to dashboard updates\r\n    if (wsService.isConnected()) {\r\n      setWsConnected(true);\r\n      wsService.subscribeToDashboard();\r\n    }\r\n\r\n    // Fallback polling if WebSocket not available\r\n    const pollInterval = setInterval(() => {\r\n      if (!wsService.isConnected()) {\r\n        loadDashboard();\r\n      }\r\n    }, 60000);\r\n\r\n    return () => {\r\n      unsubStats();\r\n      unsubCapture();\r\n      unsubRedemption();\r\n      unsubUser();\r\n      unsubConnection();\r\n      if (wsService.isConnected()) {\r\n        wsService.unsubscribeFromDashboard();\r\n      }\r\n      clearInterval(pollInterval);\r\n    };\r\n  }, [loadDashboard]);\r\n\r\n  // Reload on period change\r\n  useEffect(() => {\r\n    loadDashboard();\r\n  }, [selectedPeriod, loadDashboard]);\r\n\r\n  // Prepare chart data\r\n  const chartData = useMemo(() => {\r\n    if (!stats?.dailyActivity) return [];\r\n    return stats.dailyActivity.map(day => ({\r\n      ...day,\r\n      date: new Date(day.date).toLocaleDateString('fr-FR', { weekday: 'short', day: 'numeric' }),\r\n    }));\r\n  }, [stats?.dailyActivity]);\r\n\r\n  // Category distribution for pie chart\r\n  const categoryData = useMemo(() => {\r\n    if (!stats) return [];\r\n    return [\r\n      { name: 'Captures', value: stats.captures?.total || 0 },\r\n      { name: 'Redemptions', value: stats.redemptions?.total || 0 },\r\n      { name: 'Marketplace', value: stats.purchases?.total || 0 },\r\n    ].filter(item => item.value > 0);\r\n  }, [stats]);\r\n\r\n  // Extract stats with defaults\r\n  const userStats = stats?.users || { total: 0, active: 0, new: 0, online: 0 };\r\n  const prizeStats = stats?.prizes || { total: 0, active: 0, captured: 0 };\r\n  const captureStats = stats?.captures || { total: 0, today: 0 };\r\n  const rewardStats = stats?.rewards || { total: 0, active: 0, totalPointsInSystem: 0, pointsSpent: 0 };\r\n  const redemptionStats = stats?.redemptions || { total: 0, core: 0, marketplace: 0 };\r\n  const purchaseStats = stats?.purchases || { total: 0, unredeemed: 0, redeemed: 0 };\r\n  // New metrics: AdMob, Partners, Points\r\n  const monetizationStats = stats?.monetization || { adRevenue: 0, adRevenueToday: 0, adImpressions: 0 };\r\n  const marketplaceStats = stats?.marketplace || { partnersActive: 0, totalItems: 0 };\r\n  const pointsStats = {\r\n    inCirculation: rewardStats.totalPointsInSystem || stats?.rewards?.totalPointsInSystem || 0,\r\n    spent: rewardStats.pointsSpent || stats?.rewards?.pointsSpent || 0,\r\n    earned: rewardStats.pointsEarned || stats?.rewards?.pointsEarned || 0,\r\n  };\r\n\r\n  if (error && !stats) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <Card className=\"border-red-200 bg-red-50\">\r\n          <CardHeader>\r\n            <CardTitle className=\"text-red-800 flex items-center gap-2\">\r\n              <AlertCircle className=\"h-5 w-5\" />\r\n              Erreur de chargement\r\n            </CardTitle>\r\n            <CardDescription className=\"text-red-600\">{error}</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <Button onClick={() => loadDashboard(true)}>\r\n              <RefreshCw className=\"mr-2 h-4 w-4\" />\r\n              R├®essayer\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Dashboard</h1>\r\n          <p className=\"text-gray-500 mt-1 flex items-center gap-2\">\r\n            Vue d'ensemble de YallaCatch!\r\n            {lastUpdate && (\r\n              <span className=\"text-xs text-gray-400\">\r\n                - Mis ├á jour {formatRelativeDate(lastUpdate)}\r\n              </span>\r\n            )}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\r\n          <select\r\n            value={selectedPeriod}\r\n            onChange={(e) => setSelectedPeriod(e.target.value)}\r\n            className=\"px-3 py-2 border rounded-lg text-sm bg-white\"\r\n          >\r\n            <option value=\"1d\">Aujourd'hui</option>\r\n            <option value=\"7d\">7 jours</option>\r\n            <option value=\"30d\">30 jours</option>\r\n            <option value=\"90d\">90 jours</option>\r\n          </select>\r\n\r\n          <Badge variant={wsConnected ? 'default' : 'outline'} className=\"hidden sm:flex items-center gap-1\">\r\n            {wsConnected ? <Wifi className=\"h-3 w-3\" /> : <WifiOff className=\"h-3 w-3\" />}\r\n            {wsConnected ? 'Temps r├®el' : 'Hors ligne'}\r\n          </Badge>\r\n\r\n          <Button onClick={() => loadDashboard(true)} disabled={loading} variant=\"outline\">\r\n            <RefreshCw className={`mr-2 h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n            Actualiser\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Stats Grid */}\r\n      <div className=\"grid gap-4 grid-cols-2 lg:grid-cols-4\">\r\n        <StatCard\r\n          title=\"Utilisateurs Total\"\r\n          value={userStats.total}\r\n          subtitle={`${userStats.active} actifs - ${userStats.new} nouveaux`}\r\n          icon={Users}\r\n          color=\"blue\"\r\n          trend={userStats.new > 0 ? 'up' : undefined}\r\n          trendValue={userStats.new > 0 ? `+${userStats.new}` : undefined}\r\n          loading={loading && !stats}\r\n        />\r\n        <StatCard\r\n          title=\"Prix Distribu├®s\"\r\n          value={prizeStats.total}\r\n          subtitle={`${prizeStats.active} actifs - ${prizeStats.captured} captur├®s`}\r\n          icon={Trophy}\r\n          color=\"orange\"\r\n          loading={loading && !stats}\r\n        />\r\n        <StatCard\r\n          title=\"Captures\"\r\n          value={captureStats.total}\r\n          subtitle={`${captureStats.today} aujourd'hui`}\r\n          icon={Target}\r\n          color=\"green\"\r\n          trend={captureStats.today > 0 ? 'up' : undefined}\r\n          trendValue={captureStats.today > 0 ? `+${captureStats.today}` : undefined}\r\n          loading={loading && !stats}\r\n        />\r\n        <StatCard\r\n          title=\"R├®compenses\"\r\n          value={rewardStats.total}\r\n          subtitle={`${rewardStats.active} actives`}\r\n          icon={Gift}\r\n          color=\"purple\"\r\n          loading={loading && !stats}\r\n        />\r\n      </div>\r\n\r\n      {/* Secondary Stats */}\r\n      <div className=\"grid gap-4 grid-cols-2 lg:grid-cols-4\">\r\n        <StatCard\r\n          title=\"Redemptions Core\"\r\n          value={redemptionStats.core || 0}\r\n          subtitle=\"├ëchanges directs\"\r\n          icon={Zap}\r\n          color=\"pink\"\r\n          loading={loading && !stats}\r\n        />\r\n        <StatCard\r\n          title=\"Achats Marketplace\"\r\n          value={purchaseStats.total || 0}\r\n          subtitle={`${purchaseStats.unredeemed || 0} en attente`}\r\n          icon={ShoppingBag}\r\n          color=\"green\"\r\n          loading={loading && !stats}\r\n        />\r\n        <StatCard\r\n          title=\"Redemptions Total\"\r\n          value={redemptionStats.total || 0}\r\n          subtitle={`Core: ${redemptionStats.core || 0} - MP: ${redemptionStats.marketplace || 0}`}\r\n          icon={ClipboardList}\r\n          color=\"blue\"\r\n          loading={loading && !stats}\r\n        />\r\n        <StatCard\r\n          title=\"Taux de Conversion\"\r\n          value={userStats.total > 0 ? `${Math.round((captureStats.total / userStats.total) * 100)}%` : '0%'}\r\n          subtitle=\"Captures / Utilisateurs\"\r\n          icon={TrendingUp}\r\n          color=\"orange\"\r\n          loading={loading && !stats}\r\n        />\r\n      </div>\r\n\r\n      {/* AdMob, Partners & Points Economy */}\r\n      <div className=\"grid gap-4 grid-cols-2 lg:grid-cols-4\">\r\n        <StatCard\r\n          title=\"Revenus AdMob\"\r\n          value={`${monetizationStats.adRevenue?.toFixed(2) || '0.00'} Ôé¼`}\r\n          subtitle={`${monetizationStats.adRevenueToday?.toFixed(2) || '0.00'} Ôé¼ aujourd'hui`}\r\n          icon={DollarSign}\r\n          color=\"green\"\r\n          trend={monetizationStats.adRevenueToday > 0 ? 'up' : undefined}\r\n          loading={loading && !stats}\r\n        />\r\n        <StatCard\r\n          title=\"Impressions Pub\"\r\n          value={monetizationStats.adImpressions || 0}\r\n          subtitle={`CTR: ${monetizationStats.adCTR || 0}%`}\r\n          icon={TrendingUp}\r\n          color=\"blue\"\r\n          loading={loading && !stats}\r\n        />\r\n        <StatCard\r\n          title=\"Partenaires Actifs\"\r\n          value={marketplaceStats.partnersActive || 0}\r\n          subtitle={`${marketplaceStats.totalItems || 0} articles marketplace`}\r\n          icon={Building2}\r\n          color=\"purple\"\r\n          loading={loading && !stats}\r\n        />\r\n        <StatCard\r\n          title=\"Points en Circulation\"\r\n          value={pointsStats.inCirculation?.toLocaleString() || 0}\r\n          subtitle={`${pointsStats.spent?.toLocaleString() || 0} d├®pens├®s`}\r\n          icon={Coins}\r\n          color=\"orange\"\r\n          loading={loading && !stats}\r\n        />\r\n      </div>\r\n\r\n      {/* Charts and Activity Row */}\r\n      <div className=\"grid gap-6 lg:grid-cols-3\">\r\n        <Card className=\"lg:col-span-2\">\r\n          <CardHeader>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <BarChart3 className=\"h-5 w-5\" />\r\n                  Activit├® sur {selectedPeriod === '1d' ? 'les derni├¿res 24h' : `les ${selectedPeriod.replace('d', '')} derniers jours`}\r\n                </CardTitle>\r\n                <CardDescription>├ëvolution des captures et r├®demptions</CardDescription>\r\n              </div>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {chartData.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={320}>\r\n                <AreaChart data={chartData}>\r\n                  <defs>\r\n                    <linearGradient id=\"colorCaptures\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                      <stop offset=\"5%\" stopColor=\"#3b82f6\" stopOpacity={0.3} />\r\n                      <stop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0} />\r\n                    </linearGradient>\r\n                    <linearGradient id=\"colorRedemptions\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                      <stop offset=\"5%\" stopColor=\"#10b981\" stopOpacity={0.3} />\r\n                      <stop offset=\"95%\" stopColor=\"#10b981\" stopOpacity={0} />\r\n                    </linearGradient>\r\n                  </defs>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\r\n                  <XAxis dataKey=\"date\" tick={{ fontSize: 12 }} stroke=\"#9ca3af\" />\r\n                  <YAxis tick={{ fontSize: 12 }} stroke=\"#9ca3af\" />\r\n                  <Tooltip\r\n                    contentStyle={{\r\n                      backgroundColor: 'white',\r\n                      border: '1px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)'\r\n                    }}\r\n                  />\r\n                  <Legend />\r\n                  <Area\r\n                    type=\"monotone\"\r\n                    dataKey=\"captures\"\r\n                    stroke=\"#3b82f6\"\r\n                    fillOpacity={1}\r\n                    fill=\"url(#colorCaptures)\"\r\n                    strokeWidth={2}\r\n                    name=\"Captures\"\r\n                    isAnimationActive={false}\r\n                  />\r\n                  <Area\r\n                    type=\"monotone\"\r\n                    dataKey=\"redemptions\"\r\n                    stroke=\"#10b981\"\r\n                    fillOpacity={1}\r\n                    fill=\"url(#colorRedemptions)\"\r\n                    strokeWidth={2}\r\n                    name=\"Redemptions\"\r\n                    isAnimationActive={false}\r\n                  />\r\n                </AreaChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <div className=\"h-[320px] flex items-center justify-center text-gray-500\">\r\n                <div className=\"text-center\">\r\n                  <BarChart3 className=\"h-12 w-12 mx-auto text-gray-300 mb-3\" />\r\n                  <p>Aucune donn├®e disponible pour cette p├®riode</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <LiveActivityFeed activities={activity} wsConnected={wsConnected} />\r\n      </div>\r\n\r\n      {/* Distribution and System Health Row */}\r\n      <div className=\"grid gap-6 lg:grid-cols-3\">\r\n        <Card className=\"lg:col-span-2\">\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <PieChart className=\"h-5 w-5\" />\r\n              Distribution par Type\r\n            </CardTitle>\r\n            <CardDescription>R├®partition des activit├®s principales</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid md:grid-cols-2 gap-6 items-center\">\r\n              {categoryData.length > 0 ? (\r\n                <>\r\n                  <ResponsiveContainer width=\"100%\" height={200}>\r\n                    <RechartsPie>\r\n                      <Pie\r\n                        data={categoryData}\r\n                        cx=\"50%\"\r\n                        cy=\"50%\"\r\n                        innerRadius={50}\r\n                        outerRadius={80}\r\n                        paddingAngle={5}\r\n                        dataKey=\"value\"\r\n                      >\r\n                        {categoryData.map((entry, index) => (\r\n                          <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                        ))}\r\n                      </Pie>\r\n                      <Tooltip />\r\n                    </RechartsPie>\r\n                  </ResponsiveContainer>\r\n                  <div className=\"space-y-4\">\r\n                    {categoryData.map((item, index) => (\r\n                      <div key={item.name} className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <div\r\n                            className=\"w-3 h-3 rounded-full\"\r\n                            style={{ backgroundColor: COLORS[index % COLORS.length] }}\r\n                          ></div>\r\n                          <span className=\"text-sm font-medium\">{item.name}</span>\r\n                        </div>\r\n                        <span className=\"text-sm text-gray-600\">{item.value.toLocaleString()}</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                <div className=\"col-span-2 h-[200px] flex items-center justify-center text-gray-500\">\r\n                  <div className=\"text-center\">\r\n                    <PieChart className=\"h-12 w-12 mx-auto text-gray-300 mb-3\" />\r\n                    <p>Pas assez de donn├®es</p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <SystemHealth health={health} loading={loading && !health} />\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <Zap className=\"h-5 w-5\" />\r\n            Actions Rapides\r\n          </CardTitle>\r\n          <CardDescription>Acc├¿s rapide aux fonctionnalit├®s principales</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid gap-3 grid-cols-2 md:grid-cols-3 lg:grid-cols-6\">\r\n            <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\" onClick={() => window.location.href = '/users'}>\r\n              <Users className=\"h-5 w-5 text-blue-600\" />\r\n              <span className=\"text-xs\">Utilisateurs</span>\r\n            </Button>\r\n            <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\" onClick={() => window.location.href = '/prizes'}>\r\n              <Trophy className=\"h-5 w-5 text-orange-600\" />\r\n              <span className=\"text-xs\">Prix</span>\r\n            </Button>\r\n            <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\" onClick={() => window.location.href = '/rewards'}>\r\n              <Gift className=\"h-5 w-5 text-purple-600\" />\r\n              <span className=\"text-xs\">R├®compenses</span>\r\n            </Button>\r\n            <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\" onClick={() => window.location.href = '/partners'}>\r\n              <MapPin className=\"h-5 w-5 text-green-600\" />\r\n              <span className=\"text-xs\">Partenaires</span>\r\n            </Button>\r\n            <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\" onClick={() => window.location.href = '/analytics'}>\r\n              <TrendingUp className=\"h-5 w-5 text-pink-600\" />\r\n              <span className=\"text-xs\">Analytics</span>\r\n            </Button>\r\n            <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\" onClick={() => setShowActivityDialog(true)}>\r\n              <Activity className=\"h-5 w-5 text-gray-600\" />\r\n              <span className=\"text-xs\">Journal</span>\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <ActivityLogDialog open={showActivityDialog} onOpenChange={setShowActivityDialog} />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\DistributionManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\FriendshipsManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\GameMonitoringPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\MarketplaceManagement.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'getFieldError' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":8,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":48}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useMemo, useState } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../components/ui/card';\nimport { Button } from '../components/ui/button';\nimport { Input } from '../components/ui/input';\nimport { Badge } from '../components/ui/badge';\nimport { ConfirmDialog } from '../components/ui/confirm-dialog';\nimport { useRewardsUpdates } from '../hooks/useRealtimeUpdates';\nimport { validateMarketplaceItem, getFieldError } from '../schemas/marketplace-validation';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '../components/ui/dialog';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '../components/ui/table';\nimport {\n  ShoppingBag,\n  Plus,\n  Edit,\n  Trash2,\n  RefreshCw,\n  Search,\n  Package,\n  TrendingUp,\n  ShieldCheck,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport marketplaceService from '../services/marketplace';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../components/ui/select';\nimport { getPartners } from '../services/partners';\n\nexport default function MarketplaceManagement() {\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterCategory, setFilterCategory] = useState('all');\n  const [filterPartner, setFilterPartner] = useState('all');\n  const [partners, setPartners] = useState([]);\n  const [categories, setCategories] = useState([\n    { value: 'voucher', label: \"Bon d'Achat\" },\n    { value: 'gift_card', label: 'Carte Cadeau' },\n    { value: 'physical', label: 'Produit Physique' },\n    { value: 'digital', label: 'Produit Num├®rique' },\n    { value: 'experience', label: 'Exp├®rience' },\n  ]);\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  const [editingItem, setEditingItem] = useState(null);\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\n  const [pendingDeleteId, setPendingDeleteId] = useState(null);\n  const [formErrors, setFormErrors] = useState({});\n\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    category: 'physical',\n    pointsCost: 0,\n    stockQuantity: 0,\n    stockAvailable: 0,\n    imageUrl: '',\n    isActive: true,\n    isPopular: false,\n    isSponsored: false,\n    partnerId: '',\n    sponsorName: '',\n    sponsorLogo: '',\n    sponsorNotes: '',\n  });\n\n  const [analytics, setAnalytics] = useState(null);\n\n  useEffect(() => {\n    loadItems();\n    loadCategories();\n    loadPartnersList();\n    loadAnalytics();\n  }, [filterCategory, filterPartner]);\n\n  useRewardsUpdates({\n    onRewardUpdate: () => {\n      loadItems();\n      loadAnalytics();\n    },\n    onRedemptionCreated: () => {\n      toast.info('Nouvelle r├®demption marketplace');\n      loadItems();\n      loadAnalytics();\n    },\n    onMarketplaceUpdate: () => {\n      loadItems();\n      loadAnalytics();\n    },\n  });\n\n  const loadAnalytics = async () => {\n    try {\n      const data = await marketplaceService.getMarketplaceAnalytics('30d');\n      setAnalytics(data);\n    } catch (err) {\n      console.warn('Failed to load marketplace analytics', err);\n    }\n  };\n\n  const loadItems = async () => {\n    try {\n      setLoading(true);\n      const response = await marketplaceService.getMarketplaceItems({\n        page: 1,\n        limit: 100,\n        category: filterCategory !== 'all' ? filterCategory : undefined,\n        search: searchTerm || undefined,\n        partnerId: filterPartner !== 'all' ? filterPartner : undefined,\n      });\n      setItems(response.items || []);\n    } catch (error) {\n      toast.error('Erreur lors du chargement des items');\n      console.error('Load items error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadCategories = async () => {\n    try {\n      const cats = await marketplaceService.getMarketplaceCategories();\n      if (Array.isArray(cats) && cats.length > 0) {\n        const normalized = cats.map((c) =>\n          typeof c === 'string'\n            ? { value: c, label: c }\n            : {\n              value: c.value || c.slug || c.id || c,\n              label: c.label || c.name || c.slug || c.value || c\n            }\n        );\n        setCategories(normalized);\n      }\n    } catch (error) {\n      console.warn('Fallback to default categories', error);\n    }\n  };\n\n  const loadPartnersList = async () => {\n    try {\n      const res = await getPartners({ page: 1, limit: 100, status: 'active' });\n      setPartners(res.items || res.partners || []);\n    } catch (error) {\n      console.warn('Erreur chargement partenaires', error);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    // Validate form data\n    const validation = validateMarketplaceItem({\n      ...formData,\n      pointsCost: Number(formData.pointsCost),\n      stockQuantity: Number(formData.stockQuantity),\n      stockAvailable: Number(formData.stockAvailable),\n    });\n\n    if (!validation.isValid) {\n      setFormErrors(validation.errors);\n      toast.error('Veuillez corriger les erreurs du formulaire');\n      return;\n    }\n\n    setFormErrors({});\n\n    try {\n      const partner = formData.isSponsored\n        ? partners.find((p) => (p._id || p.id) === formData.partnerId)\n        : null;\n      const payload = {\n        ...formData,\n        pointsCost: Number(formData.pointsCost),\n        stockQuantity: Number(formData.stockQuantity),\n        stockAvailable: Number(formData.stockAvailable),\n        metadata: {\n          ...(formData.metadata || {}),\n          isSponsored: formData.isSponsored,\n          sponsorName: formData.sponsorName || undefined,\n          sponsorLogo: formData.sponsorLogo || undefined,\n          sponsorNotes: formData.sponsorNotes || undefined,\n          commissionRate: partner?.commissionRate,\n        },\n        partnerId: formData.isSponsored ? formData.partnerId : undefined,\n        listingType: 'MARKETPLACE_ITEM',\n      };\n      if (editingItem) {\n        await marketplaceService.updateMarketplaceItem(editingItem._id, payload);\n        toast.success('Item mis ├á jour avec succ├¿s');\n      } else {\n        await marketplaceService.createMarketplaceItem(payload);\n        toast.success('Item cr├®├® avec succ├¿s');\n      }\n      setShowAddDialog(false);\n      setEditingItem(null);\n      resetForm();\n      loadItems();\n    } catch (error) {\n      toast.error('Erreur lors de la sauvegarde');\n      console.error('Save item error:', error);\n    }\n  };\n\n  const handleEdit = (item) => {\n    setEditingItem(item);\n    setFormData({\n      name: item.name || '',\n      description: item.description || '',\n      category: item.category || 'physical',\n      pointsCost: Number.isFinite(item.pointsCost) ? item.pointsCost : 0,\n      stockQuantity: Number.isFinite(item.stockQuantity) ? item.stockQuantity : 0,\n      stockAvailable: Number.isFinite(item.stockAvailable) ? item.stockAvailable : (Number.isFinite(item.stockQuantity) ? item.stockQuantity : 0),\n      imageUrl: item.imageUrl || '',\n      isActive: item.isActive ?? true,\n      isPopular: item.isPopular ?? false,\n      isSponsored: item.metadata?.isSponsored || !!item.partnerId,\n      partnerId: item.partnerId || item.metadata?.partnerId || '',\n      sponsorName: item.metadata?.sponsorName || '',\n      sponsorLogo: item.metadata?.sponsorLogo || '',\n      sponsorNotes: item.metadata?.sponsorNotes || '',\n    });\n    setShowAddDialog(true);\n  };\n\n  const handleDeleteClick = (itemId) => {\n    setPendingDeleteId(itemId);\n    setDeleteConfirmOpen(true);\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (!pendingDeleteId) return;\n    try {\n      await marketplaceService.deleteMarketplaceItem(pendingDeleteId);\n      toast.success('Item supprim├® avec succ├¿s');\n      loadItems();\n    } catch (error) {\n      toast.error('Erreur lors de la suppression');\n      console.error('Delete item error:', error);\n    } finally {\n      setDeleteConfirmOpen(false);\n      setPendingDeleteId(null);\n    }\n  };\n\n  const handleStockUpdate = async (itemId, quantity) => {\n    try {\n      await marketplaceService.updateMarketplaceItem(itemId, {\n        stockQuantity: quantity,\n        stockAvailable: quantity,\n      });\n      toast.success('Stock mis ├á jour');\n      loadItems();\n    } catch (error) {\n      toast.error('Erreur lors de la mise ├á jour du stock');\n      console.error('Update stock error:', error);\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      category: 'physical',\n      pointsCost: 0,\n      stockQuantity: 0,\n      stockAvailable: 0,\n      imageUrl: '',\n      isActive: true,\n      isPopular: false,\n      isSponsored: false,\n      partnerId: '',\n      sponsorName: '',\n      sponsorLogo: '',\n      sponsorNotes: '',\n    });\n  };\n\n  const safeItems = Array.isArray(items) ? items : [];\n\n  const filteredItems = useMemo(() => {\n    if (!Array.isArray(items)) return [];\n    return items.filter((item) => {\n      const matchesSearch =\n        (item.name || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\n        (item.description || '').toLowerCase().includes(searchTerm.toLowerCase());\n      const matchesCategory = filterCategory === 'all' || item.category === filterCategory;\n      const matchesPartner = filterPartner === 'all' || item.partnerId === filterPartner;\n      return matchesSearch && matchesCategory && matchesPartner;\n    });\n  }, [items, searchTerm, filterCategory, filterPartner]);\n\n  const stats = {\n    totalItems: analytics?.totalItems || analytics?.totalRewards || safeItems.length,\n    activeItems: analytics?.activeItems || analytics?.activeRewards || safeItems.filter((i) => i.isActive).length,\n    totalStock: analytics?.totalStock || analytics?.stockValue || safeItems.reduce((sum, i) => sum + (i.stockAvailable || 0), 0),\n    totalPurchases: analytics?.totalPurchases || analytics?.totalRedemptions || safeItems.reduce((sum, i) => sum + (i.purchases || 0), 0),\n  };\n\n  const partnerName = (item) =>\n    partners.find((p) => (p._id || p.id) === item.partnerId)?.name ||\n    item.metadata?.sponsorName ||\n    null;\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <ConfirmDialog\n        open={deleteConfirmOpen}\n        onOpenChange={setDeleteConfirmOpen}\n        title=\"Supprimer l'item\"\n        description=\"├ètes-vous s├╗r de vouloir supprimer cet item du marketplace ? Cette action est irr├®versible.\"\n        confirmLabel=\"Supprimer\"\n        variant=\"danger\"\n        onConfirm={handleDeleteConfirm}\n      />\n\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Marketplace</h1>\n          <p className=\"text-gray-500 mt-1\">G├®rer les items du marketplace</p>\n        </div>\n        <Button onClick={() => { resetForm(); setShowAddDialog(true); }}>\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Nouvel Item\n        </Button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Items</CardTitle>\n            <ShoppingBag className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.totalItems}</div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Items Actifs</CardTitle>\n            <Package className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.activeItems}</div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Stock Total</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.totalStock}</div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Achats</CardTitle>\n            <RefreshCw className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.totalPurchases}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"flex flex-col md:flex-row gap-4\">\n        <div className=\"flex items-center gap-2\">\n          <Input\n            placeholder=\"Rechercher un item...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"w-64\"\n          />\n          <Button variant=\"outline\" onClick={loadItems}>\n            <Search className=\"h-4 w-4 mr-2\" />\n            Rechercher\n          </Button>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Select value={filterCategory} onValueChange={setFilterCategory}>\n            <SelectTrigger className=\"w-56\">\n              <SelectValue placeholder=\"Cat├®gorie\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">Toutes cat├®gories</SelectItem>\n              {categories.map((cat) => (\n                <SelectItem key={cat.value} value={cat.value}>\n                  {cat.label}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n          <Select value={filterPartner} onValueChange={setFilterPartner}>\n            <SelectTrigger className=\"w-56\">\n              <SelectValue placeholder=\"Partenaire\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">Tous partenaires</SelectItem>\n              {partners.map((p) => (\n                <SelectItem key={p._id || p.id} value={p._id || p.id}>\n                  {p.name}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n          <Button variant=\"ghost\" onClick={loadItems}>\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\n            Actualiser\n          </Button>\n        </div>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Items</CardTitle>\n          <CardDescription>Liste des items du marketplace</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Nom</TableHead>\n                <TableHead>Cat├®gorie</TableHead>\n                <TableHead>Points</TableHead>\n                <TableHead>Stock</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead>Partenaire</TableHead>\n                <TableHead className=\"text-right\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredItems.map((item) => (\n                <TableRow key={item._id || item.id}>\n                  <TableCell className=\"font-medium\">{item.name}</TableCell>\n                  <TableCell>\n                    <Badge variant=\"outline\">\n                      {categories.find((c) => c.value === item.category)?.label || item.category}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>{item.pointsCost}</TableCell>\n                  <TableCell>\n                    <div className=\"flex items-center gap-2\">\n                      <span>{item.stockAvailable}</span>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => {\n                          const newStock = prompt('Nouveau stock disponible', item.stockAvailable);\n                          if (newStock !== null) {\n                            handleStockUpdate(item._id || item.id, Number(newStock));\n                          }\n                        }}\n                      >\n                        Mettre ├á jour\n                      </Button>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant={item.isActive ? 'default' : 'secondary'}>\n                      {item.isActive ? 'Actif' : 'Inactif'}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    {partnerName(item) ? (\n                      <Badge variant=\"outline\" className=\"flex items-center gap-1\">\n                        <ShieldCheck className=\"h-3 w-3\" />\n                        {partnerName(item)}\n                      </Badge>\n                    ) : (\n                      <span className=\"text-xs text-gray-500\">YallaCatch</span>\n                    )}\n                  </TableCell>\n                  <TableCell className=\"text-right space-x-2\">\n                    <Button variant=\"ghost\" size=\"sm\" onClick={() => handleEdit(item)}>\n                      <Edit className=\"h-4 w-4\" />\n                    </Button>\n                    <Button variant=\"ghost\" size=\"sm\" onClick={() => handleDeleteClick(item._id || item.id)}>\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))}\n              {filteredItems.length === 0 && !loading && (\n                <TableRow>\n                  <TableCell colSpan={7} className=\"text-center text-sm text-muted-foreground\">\n                    Aucun item trouv├®\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n\n      <Dialog open={showAddDialog} onOpenChange={setShowAddDialog}>\n        <DialogContent className=\"sm:max-w-[600px] max-h-[85vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>{editingItem ? \"Modifier l'item\" : 'Nouvel item'}</DialogTitle>\n            <DialogDescription>\n              {editingItem ? \"Mettre ├á jour les informations de l'item.\" : 'Cr├®er un nouvel item pour le marketplace.'}\n            </DialogDescription>\n          </DialogHeader>\n\n          <form className=\"space-y-4\" onSubmit={handleSubmit}>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-gray-700\">Nom</label>\n                <Input\n                  value={formData.name}\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                  required\n                  className={formErrors.name ? 'border-red-500' : ''}\n                />\n                {formErrors.name && <p className=\"text-sm text-red-500\">{formErrors.name}</p>}\n              </div>\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-gray-700\">Cat├®gorie</label>\n                <Select\n                  value={formData.category}\n                  onValueChange={(val) => setFormData({ ...formData, category: val })}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Choisir une cat├®gorie\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {categories.map((cat) => (\n                      <SelectItem key={cat.value} value={cat.value}>\n                        {cat.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-gray-700\">Description</label>\n              <Input\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                className={formErrors.description ? 'border-red-500' : ''}\n              />\n              {formErrors.description && <p className=\"text-sm text-red-500\">{formErrors.description}</p>}\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-gray-700\">Co├╗t (points)</label>\n                <Input\n                  type=\"number\"\n                  value={formData.pointsCost}\n                  onChange={(e) => setFormData({ ...formData, pointsCost: Number(e.target.value) })}\n                  min={1}\n                  required\n                  className={formErrors.pointsCost ? 'border-red-500' : ''}\n                />\n                {formErrors.pointsCost && <p className=\"text-sm text-red-500\">{formErrors.pointsCost}</p>}\n              </div>\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-gray-700\">Stock total</label>\n                <Input\n                  type=\"number\"\n                  value={formData.stockQuantity}\n                  onChange={(e) =>\n                    setFormData({\n                      ...formData,\n                      stockQuantity: Number(e.target.value),\n                      stockAvailable: Number(e.target.value),\n                    })\n                  }\n                  min={0}\n                  required\n                  className={formErrors.stockQuantity || formErrors.stockAvailable ? 'border-red-500' : ''}\n                />\n                {(formErrors.stockQuantity || formErrors.stockAvailable) && (\n                  <p className=\"text-sm text-red-500\">{formErrors.stockQuantity || formErrors.stockAvailable}</p>\n                )}\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-gray-700\">Image URL</label>\n                <Input\n                  value={formData.imageUrl}\n                  onChange={(e) => setFormData({ ...formData, imageUrl: e.target.value })}\n                  className={formErrors.imageUrl ? 'border-red-500' : ''}\n                />\n                {formErrors.imageUrl && <p className=\"text-sm text-red-500\">{formErrors.imageUrl}</p>}\n              </div>\n              <div className=\"space-y-2 flex items-center gap-4\">\n                <label className=\"text-sm font-medium text-gray-700\">Actif</label>\n                <Input\n                  type=\"checkbox\"\n                  checked={formData.isActive}\n                  onChange={(e) => setFormData({ ...formData, isActive: e.target.checked })}\n                />\n                <label className=\"text-sm font-medium text-gray-700\">Populaire</label>\n                <Input\n                  type=\"checkbox\"\n                  checked={formData.isPopular}\n                  onChange={(e) => setFormData({ ...formData, isPopular: e.target.checked })}\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2 border-t pt-3\">\n              <label className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.isSponsored}\n                  onChange={(e) => setFormData({ ...formData, isSponsored: e.target.checked })}\n                  className=\"rounded\"\n                />\n                <span className=\"text-sm font-medium\">Item sponsoris├® (li├® ├á un partenaire)</span>\n              </label>\n              {formData.isSponsored && (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700\">Partenaire</label>\n                    <select\n                      value={formData.partnerId}\n                      onChange={(e) => setFormData({ ...formData, partnerId: e.target.value })}\n                      className=\"w-full px-3 py-2 border rounded-md\"\n                      required\n                    >\n                      <option value=\"\">S├®lectionner un partenaire</option>\n                      {partners.map((p) => (\n                        <option key={p._id || p.id} value={p._id || p.id}>\n                          {p.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700\">Nom sponsor</label>\n                    <Input\n                      value={formData.sponsorName}\n                      onChange={(e) => setFormData({ ...formData, sponsorName: e.target.value })}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700\">Logo sponsor (URL)</label>\n                    <Input\n                      value={formData.sponsorLogo}\n                      onChange={(e) => setFormData({ ...formData, sponsorLogo: e.target.value })}\n                      placeholder=\"https://...\"\n                    />\n                  </div>\n                  <div className=\"md:col-span-2\">\n                    <label className=\"text-sm font-medium text-gray-700\">Notes sponsor</label>\n                    <textarea\n                      className=\"w-full px-3 py-2 border rounded-md\"\n                      rows={2}\n                      value={formData.sponsorNotes}\n                      onChange={(e) => setFormData({ ...formData, sponsorNotes: e.target.value })}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"flex justify-end gap-2\">\n              <Button type=\"button\" variant=\"ghost\" onClick={() => { setShowAddDialog(false); resetForm(); }}>\n                Annuler\n              </Button>\n              <Button type=\"submit\">\n                {editingItem ? 'Mettre ├á jour' : 'Cr├®er'}\n              </Button>\n            </div>\n          </form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\NotificationsManagement_Complete.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\PartnersManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\PowerUpManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\PrizeClaimsManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\PrizeDistributionPage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\PrizesManagement.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'formatDurationShort' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":25,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":29}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\nimport { toast } from 'sonner';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '../components/ui/card';\nimport { Button } from '../components/ui/button';\nimport { Input } from '../components/ui/input';\nimport { Badge } from '../components/ui/badge';\nimport { ConfirmDialog } from '../components/ui/confirm-dialog';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '../components/ui/dialog';\nimport { MapPin, Plus, Trash2, RefreshCw, Trophy, Search, Map, List, Upload, Edit, Eye } from 'lucide-react';\nimport { getPrizes, createPrize, deletePrize, updatePrize, addPrizesBatch } from '../services/prizes';\nimport { getRewards } from '../services/rewards';\nimport { formatDate } from '../utils/dates';\nimport { formatDurationShort } from '../utils/time-formatter';\nimport { TUNISIA_CITIES } from '../utils/geo';\nimport MapComponent from '../components/MapComponent';\n\nconst CATEGORY_OPTIONS = [\n  { value: 'electronics', label: 'Electronique' },\n  { value: 'gaming', label: 'Gaming' },\n  { value: 'lifestyle', label: 'Lifestyle' },\n  { value: 'shopping', label: 'Shopping' },\n  { value: 'food', label: 'Food' },\n  { value: 'entertainment', label: 'Divertissement' },\n];\n\nconst RARITY_OPTIONS = [\n  { value: 'common', label: 'Common' },\n  { value: 'uncommon', label: 'Uncommon' },\n  { value: 'rare', label: 'Rare' },\n  { value: 'epic', label: 'Epic' },\n  { value: 'legendary', label: 'Legendary' },\n];\n\nconst STATUS_OPTIONS = [\n  { value: 'active', label: 'Actif' },\n  { value: 'inactive', label: 'Inactif' },\n  { value: 'captured', label: 'Captur├®' },\n  { value: 'expired', label: 'Expir├®' },\n  { value: 'revoked', label: 'R├®voqu├®' },\n];\n\nconst TYPE_OPTIONS = [\n  { value: 'physical', label: 'Physique' },\n  { value: 'digital', label: 'Digital' },\n  { value: 'voucher', label: 'Voucher' },\n  { value: 'mystery', label: 'Mystere' },\n];\n\nconst CONTENT_TYPES = [\n  { value: 'points', label: 'Points uniquement' },\n  { value: 'reward', label: 'Recompense directe' },\n  { value: 'hybrid', label: 'Mystery Box (Points + chance recompense)' },\n];\n\nconst DISPLAY_TYPES = [\n  { value: 'standard', label: 'Standard' },\n  { value: 'mystery_box', label: 'Boite Mystere' },\n  { value: 'treasure', label: 'Coffre' },\n  { value: 'bonus', label: 'Bonus/Power-up' },\n  { value: 'special', label: 'Evenement Special' },\n];\n\nconst DEFAULT_FORM = {\n  name: '',\n  description: 'Recompense YallaCatch!',\n  contentType: 'points',\n  displayType: 'standard',\n  category: 'electronics',\n  rarity: 'common',\n  status: 'active',\n  points: 100,\n  bonusMultiplier: 1,\n  rewardId: '',\n  probability: 0,\n  type: 'physical',\n  city: 'Tunis',\n  latitude: 36.8065,\n  longitude: 10.1815,\n  radius: 50,\n};\n\nconst ALLOWED_TYPES = TYPE_OPTIONS.map((t) => t.value);\nconst ALLOWED_CATEGORIES = CATEGORY_OPTIONS.map((c) => c.value);\nconst ALLOWED_RARITIES = RARITY_OPTIONS.map((r) => r.value);\n\nexport default function PrizesManagement() {\n  const [prizes, setPrizes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState('all');\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  const [showBatchDialog, setShowBatchDialog] = useState(false);\n  const [batchArea, setBatchArea] = useState(null);\n  const [batchPreviews, setBatchPreviews] = useState([]);\n  const [batchForm, setBatchForm] = useState({\n    name: '',\n    description: 'Distribution en lot',\n    category: 'electronics',\n    rarity: 'common',\n    type: 'physical',\n    points: 100,\n    count: 10,\n    areaRadius: 500,  // Distribution area radius in meters (can be large)\n    prizeRadius: 50,  // Prize detection radius (max 500m per backend validation)\n    latitude: 36.8065,\n    longitude: 10.1815,\n    city: 'Tunis',\n  });\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [totalPrizes, setTotalPrizes] = useState(0);\n  const [viewMode, setViewMode] = useState('list');\n  const [selectedLocation, setSelectedLocation] = useState(null);\n  const [mapResetToken, setMapResetToken] = useState(0);\n  const [availableRewards, setAvailableRewards] = useState([]);\n  const prizesPerPage = 20;\n\n  const [formData, setFormData] = useState(DEFAULT_FORM);\n  const [editingPrize, setEditingPrize] = useState(null);\n  const [showDetailsDialog, setShowDetailsDialog] = useState(false);\n  const [selectedPrize, setSelectedPrize] = useState(null);\n  const [stats, setStats] = useState({ active: 0, captured: 0, expired: 0, inactive: 0, revoked: 0, total: 0 });\n  const [allPrizesForMap, setAllPrizesForMap] = useState([]);\n  const [loadingMap, setLoadingMap] = useState(false);\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\n  const [pendingDeleteId, setPendingDeleteId] = useState(null);\n\n  const loadRewards = async () => {\n    try {\n      const result = await getRewards({ limit: 100 });\n      setAvailableRewards(result.items || []);\n    } catch (err) {\n      console.error('Erreur chargement recompenses:', err);\n    }\n  };\n\n  // Load ALL prizes for map view (no pagination)\n  const loadAllPrizesForMap = async () => {\n    try {\n      setLoadingMap(true);\n      // Load all prizes with a large limit\n      const result = await getPrizes({ limit: 10000 });\n      setAllPrizesForMap(result.items || []);\n    } catch (err) {\n      console.error('Erreur chargement prix pour carte:', err);\n    } finally {\n      setLoadingMap(false);\n    }\n  };\n\n  const loadPrizes = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const filters = { page: currentPage, limit: prizesPerPage };\n      if (searchTerm) filters.search = searchTerm;\n      if (filterStatus !== 'all') filters.status = filterStatus;\n      const result = await getPrizes(filters);\n      setPrizes(result.items || []);\n      setTotalPrizes(result.total || 0);\n      setTotalPages(Math.max(1, Math.ceil((result.total || 0) / prizesPerPage)));\n      // Set stats from API response (global counts, not page counts)\n      if (result.stats) {\n        setStats({\n          active: result.stats.active || 0,\n          captured: result.stats.captured || 0,\n          expired: result.stats.expired || 0,\n          inactive: result.stats.inactive || 0,\n          revoked: result.stats.revoked || 0,\n          total: result.total || 0\n        });\n      }\n    } catch (err) {\n      console.error('Erreur chargement prix:', err);\n      setError(err.message);\n      toast.error('Erreur lors du chargement des prix');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadPrizes();\n    loadRewards();\n  }, []); // Initial load only\n\n  // Handle pagination changes\n  useEffect(() => {\n    if (currentPage > 0) {\n      loadPrizes();\n    }\n  }, [currentPage]);\n\n  // Handle filter status changes - reset to page 1\n  useEffect(() => {\n    if (currentPage === 1) {\n      loadPrizes();\n    } else {\n      setCurrentPage(1);\n    }\n  }, [filterStatus]);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (currentPage === 1) loadPrizes();\n      else setCurrentPage(1);\n    }, 400);\n    return () => clearTimeout(timer);\n  }, [searchTerm]);\n\n  // Load all prizes when switching to map view\n  useEffect(() => {\n    if (viewMode === 'map') {\n      loadAllPrizesForMap();\n    }\n  }, [viewMode]);\n\n  const normalizeCityCoords = (cityName) => {\n    const city = TUNISIA_CITIES.find((c) => c.name === cityName);\n    if (city) {\n      return { lat: city.lat, lng: city.lng, city: city.name };\n    }\n    return {\n      lat: formData.latitude || 36.8065,\n      lng: formData.longitude || 10.1815,\n      city: cityName || 'Tunis',\n    };\n  };\n\n  const handleAddPrize = async (e) => {\n    e.preventDefault();\n    setError(null);\n\n    const safeName = (formData.name || '').trim();\n    const safeDescription = (formData.description || '').trim() || 'Recompense YallaCatch!';\n    if (safeName.length < 2) {\n      setError('Nom requis (min 2 caracteres).');\n      toast.error('Nom requis (min 2 caract├¿res)');\n      return;\n    }\n    if (safeDescription.length < 10) {\n      setError('Description requise (min 10 caracteres).');\n      toast.error('Description requise (min 10 caract├¿res)');\n      return;\n    }\n\n    const safeType = ALLOWED_TYPES.includes(formData.type) ? formData.type : 'physical';\n    const safeCategory = ALLOWED_CATEGORIES.includes(formData.category) ? formData.category : 'lifestyle';\n    const safeRarity = ALLOWED_RARITIES.includes(formData.rarity) ? formData.rarity : 'common';\n    const coords = selectedLocation || normalizeCityCoords(formData.city);\n\n    try {\n      await createPrize({\n        ...formData,\n        name: safeName,\n        description: safeDescription,\n        type: safeType,\n        category: safeCategory,\n        rarity: safeRarity,\n        city: coords.city,\n        latitude: Number(coords.lat),\n        longitude: Number(coords.lng),\n        radius: Number(formData.radius || 50),\n        points: Math.max(1, Number(formData.points || 0)),\n        bonusMultiplier: Number(formData.bonusMultiplier || 1),\n        probability: Number(formData.probability || 0),\n        quantity: Number(formData.quantity || 1),\n      });\n      toast.success('Prix cr├®├® avec succ├¿s');\n      setShowAddDialog(false);\n      setFormData(DEFAULT_FORM);\n      setSelectedLocation(null);\n      setMapResetToken((t) => t + 1);\n      loadPrizes();\n      if (viewMode === 'map') loadAllPrizesForMap();\n    } catch (err) {\n      console.error('Erreur creation prix:', err);\n      setError(err.message);\n      toast.error(err.message || 'Erreur lors de la cr├®ation du prix');\n    }\n  };\n\n  const handleDeletePrizeClick = (prizeId) => {\n    setPendingDeleteId(prizeId);\n    setDeleteConfirmOpen(true);\n  };\n\n  const handleDeletePrizeConfirm = async () => {\n    if (!pendingDeleteId) return;\n    try {\n      await deletePrize(pendingDeleteId);\n      toast.success('Prix supprim├® avec succ├¿s');\n      loadPrizes();\n      if (viewMode === 'map') loadAllPrizesForMap();\n    } catch (err) {\n      console.error('Erreur suppression prix:', err);\n      setError(err.message);\n      toast.error(err.message || 'Erreur lors de la suppression');\n    } finally {\n      setDeleteConfirmOpen(false);\n      setPendingDeleteId(null);\n    }\n  };\n\n  const handleEditPrize = (prize) => {\n    setEditingPrize(prize);\n    setFormData({\n      name: prize.name || '',\n      description: prize.description || 'Recompense YallaCatch!',\n      contentType: prize.contentType || 'points',\n      displayType: prize.displayType || 'standard',\n      category: prize.category || 'electronics',\n      rarity: prize.rarity || 'common',\n      status: prize.status || 'active',\n      points: prize.points || 100,\n      bonusMultiplier: prize.metadata?.bonusMultiplier || 1,\n      rewardId: prize.metadata?.rewardId || '',\n      probability: prize.metadata?.probability || 0,\n      type: prize.type || 'physical',\n      city: prize.city || prize.location?.city || 'Tunis',\n      latitude: prize.latitude || prize.location?.lat || 36.8065,\n      longitude: prize.longitude || prize.location?.lng || 10.1815,\n      radius: prize.radius || prize.location?.radius || 50,\n      quantity: prize.quantity || 1,\n    });\n    setSelectedLocation({ \n      lat: prize.latitude || prize.location?.lat || 36.8065, \n      lng: prize.longitude || prize.location?.lng || 10.1815 \n    });\n    setShowAddDialog(true);\n  };\n\n  const handleUpdatePrize = async (e) => {\n    e.preventDefault();\n    setError(null);\n\n    const safeName = (formData.name || '').trim();\n    const safeDescription = (formData.description || '').trim() || 'Recompense YallaCatch!';\n    if (safeName.length < 2) {\n      setError('Nom requis (min 2 caracteres).');\n      toast.error('Nom requis (min 2 caract├¿res)');\n      return;\n    }\n    if (safeDescription.length < 10) {\n      setError('Description requise (min 10 caracteres).');\n      toast.error('Description requise (min 10 caract├¿res)');\n      return;\n    }\n\n    const safeType = ALLOWED_TYPES.includes(formData.type) ? formData.type : 'physical';\n    const safeCategory = ALLOWED_CATEGORIES.includes(formData.category) ? formData.category : 'lifestyle';\n    const safeRarity = ALLOWED_RARITIES.includes(formData.rarity) ? formData.rarity : 'common';\n    const coords = selectedLocation || normalizeCityCoords(formData.city);\n\n    try {\n      await updatePrize(editingPrize.id, {\n        name: safeName,\n        description: safeDescription,\n        type: safeType,\n        category: safeCategory,\n        rarity: safeRarity,\n        city: coords.city,\n        latitude: Number(coords.lat),\n        longitude: Number(coords.lng),\n        radius: Number(formData.radius || 50),\n        value: Math.max(1, Number(formData.points || 0)),\n        quantity: Number(formData.quantity || 1),\n        status: formData.status,\n      });\n      toast.success('Prix mis ├á jour avec succ├¿s');\n      setShowAddDialog(false);\n      setFormData(DEFAULT_FORM);\n      setEditingPrize(null);\n      setSelectedLocation(null);\n      setMapResetToken((t) => t + 1);\n      loadPrizes();\n      if (viewMode === 'map') loadAllPrizesForMap();\n    } catch (err) {\n      console.error('Erreur mise a jour prix:', err);\n      setError(err.message);\n      toast.error(err.message || 'Erreur lors de la mise ├á jour');\n    }\n  };\n\n  const handleViewPrize = (prize) => {\n    setSelectedPrize(prize);\n    setShowDetailsDialog(true);\n  };\n\n  const handleCityChange = (cityName) => {\n    const city = TUNISIA_CITIES.find((c) => c.name === cityName);\n    if (!city) return;\n    setFormData((prev) => ({\n      ...prev,\n      city: cityName,\n      latitude: city.lat,\n      longitude: city.lng,\n    }));\n    setSelectedLocation({ lat: city.lat, lng: city.lng });\n  };\n\n  const handleMapClick = (location) => {\n    setFormData((prev) => ({\n      ...prev,\n      latitude: location.lat,\n      longitude: location.lng,\n    }));\n    setSelectedLocation(location);\n  };\n\n  const generateBatchLocations = (count, center, radiusMeters) => {\n    const locations = [];\n    const radiusInDegrees = radiusMeters / 111320;\n    for (let i = 0; i < count; i++) {\n      const angle = Math.random() * 2 * Math.PI;\n      const distance = Math.sqrt(Math.random()) * radiusInDegrees;\n      const lat = center.lat + distance * Math.cos(angle);\n      const lng = center.lng + distance * Math.sin(angle);\n      locations.push({ lat, lng });\n    }\n    return locations;\n  };\n\n  const handleBatchSubmit = async () => {\n    setError(null);\n    const center = batchArea?.center || { lat: Number(batchForm.latitude), lng: Number(batchForm.longitude) };\n    const areaRadius = batchArea?.radius || Number(batchForm.areaRadius || 500);\n    const prizeRadius = Math.min(500, Math.max(10, Number(batchForm.prizeRadius || 50))); // Clamp to 10-500m\n    const count = Math.max(1, Number(batchForm.count || 1));\n\n    if (!batchForm.name.trim()) {\n      setError('Nom de base requis.');\n      toast.error('Nom de base requis');\n      return;\n    }\n    const safeDesc = (batchForm.description || 'Distribution en lot').trim();\n    if (safeDesc.length < 10) {\n      setError('Description (min 10 caracteres) requise.');\n      toast.error('Description (min 10 caract├¿res) requise');\n      return;\n    }\n    if (!center.lat || !center.lng) {\n      setError('Selectionnez une zone ou saisissez des coordonnees valides.');\n      toast.error('S├®lectionnez une zone valide');\n      return;\n    }\n\n    const safeType = ALLOWED_TYPES.includes(batchForm.type) ? batchForm.type : 'physical';\n    const safeCategory = ALLOWED_CATEGORIES.includes(batchForm.category) ? batchForm.category : 'lifestyle';\n    const safeRarity = ALLOWED_RARITIES.includes(batchForm.rarity) ? batchForm.rarity : 'common';\n    const safeCity = batchForm.city || 'Tunis';\n\n    const locations = batchArea\n      ? batchPreviews.map((p) => ({ lat: p.lat, lng: p.lng }))\n      : generateBatchLocations(count, center, areaRadius);\n\n    const payload = locations.map((loc, idx) => ({\n      name: `${batchForm.name} #${idx + 1}`,\n      description: safeDesc,\n      points: Math.max(1, Number(batchForm.points || 0)),\n      latitude: loc.lat,\n      longitude: loc.lng,\n      radius: prizeRadius,  // Use prize detection radius (max 500m)\n      category: safeCategory,\n      rarity: safeRarity,\n      type: safeType,\n      status: 'active',\n      contentType: batchForm.contentType || 'points',\n      displayType: batchForm.displayType || 'standard',\n      city: safeCity,\n      imageUrl: 'https://picsum.photos/200',\n    }));\n\n    try {\n      await addPrizesBatch(payload);\n      toast.success(`${locations.length} prix ajout├®s avec succ├¿s`);\n      setShowBatchDialog(false);\n      setBatchPreviews([]);\n      setBatchArea(null);\n      loadPrizes();\n      if (viewMode === 'map') loadAllPrizesForMap();\n    } catch (err) {\n      console.error(err);\n      const errMsg = err.message || 'Erreur ajout en lot';\n      setError(errMsg);\n      toast.error(errMsg);\n    }\n  };\n\n  const getStatusBadge = (status) => {\n    const variants = {\n      active: { label: 'Actif', className: 'bg-green-100 text-green-800' },\n      claimed: { label: 'Captur\\u00e9', className: 'bg-blue-100 text-blue-800' },\n      captured: { label: 'Captur\\u00e9', className: 'bg-blue-100 text-blue-800' },\n      expired: { label: 'Expire', className: 'bg-gray-100 text-gray-800' },\n      inactive: { label: 'Inactif', className: 'bg-slate-200 text-slate-700' },\n      revoked: { label: 'Revoque', className: 'bg-red-100 text-red-700' },\n    };\n    const variant = variants[status] || variants.active;\n    return <Badge className={variant.className}>{variant.label}</Badge>;\n  };\n\n  const getTypeLabel = (type) => {\n    const labels = {\n      physical: 'Physique',\n      digital: 'Digital',\n      voucher: 'Voucher',\n      mystery: 'Mystere',\n    };\n    return labels[type] || type;\n  };\n\n  // Use all prizes for map view (no pagination limit)\n  // MapComponent expects zone.coordinates format\n  const prizesForMap = allPrizesForMap.map((prize) => ({\n    id: prize.id,\n    name: prize.name,\n    description: prize.description,\n    type: prize.type,\n    status: prize.status,\n    pointsReward: prize.points,\n    quantity: prize.quantity || 1,\n    available: (prize.quantity || 1) - (prize.claimedCount || 0),\n    capturedCount: prize.claimedCount || 0,\n    // Zone format expected by MapComponent\n    zone: {\n      coordinates: {\n        lat: prize.location?.lat || prize.latitude,\n        lng: prize.location?.lng || prize.longitude,\n      },\n      value: prize.location?.city || prize.city || 'Unknown',\n      radius: prize.radius || prize.location?.radius || 50,\n    },\n  }));\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Confirm Dialog */}\n      <ConfirmDialog\n        open={deleteConfirmOpen}\n        onOpenChange={setDeleteConfirmOpen}\n        title=\"Supprimer le prix\"\n        description=\"├ètes-vous s├╗r de vouloir supprimer ce prix ? Cette action est irr├®versible.\"\n        confirmLabel=\"Supprimer\"\n        variant=\"danger\"\n        onConfirm={handleDeletePrizeConfirm}\n      />\n\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Gestion des Prix</h1>\n          <p className=\"text-gray-500 mt-1\">{totalPrizes} prix au total</p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button variant=\"outline\" onClick={loadPrizes} disabled={loading}>\n            <RefreshCw className={`mr-2 h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            Actualiser\n          </Button>\n          <Button variant=\"outline\" onClick={() => setShowBatchDialog(true)}>\n            <Upload className=\"mr-2 h-4 w-4\" />\n            Lot\n          </Button>\n          <Button onClick={() => setShowAddDialog(true)}>\n            <Plus className=\"mr-2 h-4 w-4\" />\n            Ajouter un Prix\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Actifs</CardTitle>\n            <CardDescription>Prix disponibles</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-3xl font-bold text-green-600\">{stats.active}</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader>\n            <CardTitle>Captur├®s</CardTitle>\n            <CardDescription>Total captur├®s</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-3xl font-bold text-blue-600\">{stats.captured}</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader>\n            <CardTitle>Expir├®s</CardTitle>\n            <CardDescription>Non disponibles</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-3xl font-bold text-gray-600\">{stats.expired}</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader>\n            <CardTitle>Total</CardTitle>\n            <CardDescription>Nombre total</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-3xl font-bold\">{stats.total}</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm p-4 flex flex-col gap-3\">\n        <div className=\"flex flex-wrap gap-3 items-center\">\n          <div className=\"relative flex-1 min-w-[220px]\">\n            <Input\n              placeholder=\"Rechercher un prix...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"pl-8\"\n            />\n            <Search className=\"absolute left-2 top-2.5 h-4 w-4 text-gray-400\" />\n          </div>\n          <select\n            value={filterStatus}\n            onChange={(e) => setFilterStatus(e.target.value)}\n            className=\"px-3 py-2 border rounded-md\"\n          >\n            <option value=\"all\">Tous les statuts</option>\n            {STATUS_OPTIONS.map((s) => (\n              <option key={s.value} value={s.value}>\n                {s.label}\n              </option>\n            ))}\n          </select>\n          <div className=\"flex gap-2\">\n            <Button variant={viewMode === 'list' ? 'default' : 'outline'} onClick={() => setViewMode('list')}>\n              <List className=\"mr-2 h-4 w-4\" />\n              Liste\n            </Button>\n            <Button variant={viewMode === 'map' ? 'default' : 'outline'} onClick={() => setViewMode('map')}>\n              <Map className=\"mr-2 h-4 w-4\" />\n              Carte\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {viewMode === 'map' && (\n        <Card>\n          <CardContent>\n            {loadingMap ? (\n              <div className=\"flex items-center justify-center p-8\">\n                <RefreshCw className=\"h-8 w-8 animate-spin text-blue-500\" />\n                <span className=\"ml-2\">Chargement de {stats.total || totalPrizes} prix sur la carte...</span>\n              </div>\n            ) : (\n              <>\n                <div className=\"text-sm text-gray-500 mb-2\">\n                  {allPrizesForMap.length} prix affich├®s sur la carte\n                </div>\n                <MapComponent prizes={prizesForMap} showPrizes />\n              </>\n            )}\n          </CardContent>\n        </Card>\n      )}\n\n      {error && <div className=\"p-3 bg-red-50 text-red-700 rounded-md\">{error}</div>}\n\n      {loading && (\n        <div className=\"flex items-center justify-center p-8\">\n          <RefreshCw className=\"h-8 w-8 animate-spin text-blue-500\" />\n          <span className=\"ml-2\">Chargement des prix...</span>\n        </div>\n      )}\n\n      {!loading && viewMode === 'list' && (\n        <div className=\"grid md:grid-cols-3 gap-4\">\n          {prizes.map((prize) => (\n            <Card key={prize.id}>\n              <CardHeader>\n                <div className=\"flex justify-between items-start\">\n                  <div>\n                    <CardTitle>{prize.name}</CardTitle>\n                    <CardDescription>{prize.description}</CardDescription>\n                  </div>\n                  {getStatusBadge(prize.status)}\n                </div>\n              </CardHeader>\n              <CardContent className=\"space-y-2\">\n                <div className=\"flex items-center gap-2\">\n                  <Trophy className=\"h-4 w-4 text-yellow-500\" />\n                  <span className=\"font-semibold\">{prize.points} points</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <MapPin className=\"h-4 w-4 text-blue-500\" />\n                  <span>{prize.city || prize.location?.city || 'Localisation inconnue'}</span>\n                </div>\n                <div className=\"text-xs text-gray-500\">Animation: <span className=\"font-medium text-purple-600 capitalize\">{prize.displayType || 'Standard'}</span></div>\n                <div className=\"text-xs text-gray-500\">Type: {getTypeLabel(prize.type)}</div>\n                <div className=\"text-xs text-gray-500\">Categorie: {prize.category || 'N/A'}</div>\n                <div className=\"text-xs text-gray-500\">Rarete: {prize.rarity || 'common'}</div>\n                <div className=\"text-xs text-gray-500\">Quantite: {prize.quantity || 1} (Reclames: {prize.claimedCount || 0})</div>\n                <div className=\"text-xs text-gray-500\">Cree le {formatDate(prize.createdAt)}</div>\n                <div className=\"flex gap-2 pt-2\">\n                  <Button size=\"sm\" variant=\"outline\" className=\"flex-1\" onClick={() => handleViewPrize(prize)} title=\"Voir details\" aria-label=\"Voir les d├®tails\">\n                    <Eye className=\"h-4 w-4\" />\n                  </Button>\n                  <Button size=\"sm\" variant=\"outline\" className=\"flex-1\" onClick={() => handleEditPrize(prize)} title=\"Modifier\" aria-label=\"Modifier\">\n                    <Edit className=\"h-4 w-4\" />\n                  </Button>\n                  <Button size=\"sm\" variant=\"outline\" className=\"flex-1 text-red-500 hover:text-red-700\" onClick={() => handleDeletePrizeClick(prize.id)} title=\"Supprimer\" aria-label=\"Supprimer\">\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      <div className=\"flex justify-between items-center pt-4\">\n        <span className=\"text-sm text-gray-500\">\n          Page {currentPage} / {totalPages}\n        </span>\n        <div className=\"flex gap-2\">\n          <Button variant=\"outline\" disabled={currentPage === 1} onClick={() => setCurrentPage((p) => Math.max(1, p - 1))}>\n            Pr´┐¢c´┐¢dent\n          </Button>\n          <Button variant=\"outline\" disabled={currentPage >= totalPages} onClick={() => setCurrentPage((p) => p + 1)}>\n            Suivant\n          </Button>\n        </div>\n      </div>\n\n      <Dialog open={showAddDialog} onOpenChange={(open) => {\n        setShowAddDialog(open);\n        if (!open) {\n          setEditingPrize(null);\n          setFormData(DEFAULT_FORM);\n          setSelectedLocation(null);\n        }\n      }}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>{editingPrize ? 'Modifier le prix' : 'Ajouter un prix'}</DialogTitle>\n            <DialogDescription>\n              {editingPrize ? 'Modifiez les informations du prix.' : 'Configurez le prix et sa localisation.'}\n            </DialogDescription>\n          </DialogHeader>\n\n          <form className=\"space-y-4\" onSubmit={editingPrize ? handleUpdatePrize : handleAddPrize}>\n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Nom</label>\n                <Input value={formData.name} onChange={(e) => setFormData({ ...formData, name: e.target.value })} required />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Description</label>\n                <Input value={formData.description} onChange={(e) => setFormData({ ...formData, description: e.target.value })} required />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Categorie</label>\n                <select value={formData.category} onChange={(e) => setFormData({ ...formData, category: e.target.value })} className=\"w-full px-3 py-2 border rounded-md\">\n                  {CATEGORY_OPTIONS.map((c) => (\n                    <option key={c.value} value={c.value}>\n                      {c.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Raret´┐¢</label>\n                <select value={formData.rarity} onChange={(e) => setFormData({ ...formData, rarity: e.target.value })} className=\"w-full px-3 py-2 border rounded-md\">\n                  {RARITY_OPTIONS.map((r) => (\n                    <option key={r.value} value={r.value}>\n                      {r.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Type</label>\n                <select value={formData.type} onChange={(e) => setFormData({ ...formData, type: e.target.value })} className=\"w-full px-3 py-2 border rounded-md\">\n                  {TYPE_OPTIONS.map((t) => (\n                    <option key={t.value} value={t.value}>\n                      {t.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Animation (Display)</label>\n                <select \n                  value={formData.displayType} \n                  onChange={(e) => setFormData({ ...formData, displayType: e.target.value })} \n                  className=\"w-full px-3 py-2 border rounded-md bg-blue-50\"\n                >\n                  {DISPLAY_TYPES.map((t) => (\n                    <option key={t.value} value={t.value}>\n                      {t.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Type de Contenu</label>\n                <select \n                  value={formData.contentType} \n                  onChange={(e) => setFormData({ ...formData, contentType: e.target.value })} \n                  className=\"w-full px-3 py-2 border rounded-md\"\n                >\n                  {CONTENT_TYPES.map((c) => (\n                    <option key={c.value} value={c.value}>\n                      {c.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Statut</label>\n                <select value={formData.status} onChange={(e) => setFormData({ ...formData, status: e.target.value })} className=\"w-full px-3 py-2 border rounded-md\">\n                  {STATUS_OPTIONS.map((s) => (\n                    <option key={s.value} value={s.value}>\n                      {s.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Points</label>\n                <Input type=\"number\" value={formData.points} onChange={(e) => setFormData({ ...formData, points: parseInt(e.target.value, 10) || 0 })} required />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Quantit´┐¢</label>\n                <Input type=\"number\" value={formData.quantity || 1} onChange={(e) => setFormData({ ...formData, quantity: parseInt(e.target.value, 10) || 1 })} />\n              </div>\n            </div>\n\n            {formData.contentType !== 'points' && (\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Recompense (ID)</label>\n                  <select\n                    value={formData.rewardId}\n                    onChange={(e) => setFormData({ ...formData, rewardId: e.target.value })}\n                    className=\"w-full px-3 py-2 border rounded-md\"\n                  >\n                    <option value=\"\">Aucune</option>\n                    {availableRewards.map((r) => (\n                      <option key={r.id} value={r.id}>\n                        {r.name} ({r.pointsCost} pts)\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Probabilit´┐¢ (%)</label>\n                  <Input\n                    type=\"number\"\n                    value={formData.probability}\n                    onChange={(e) => setFormData({ ...formData, probability: parseFloat(e.target.value) || 0 })}\n                  />\n                </div>\n              </div>\n            )}\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Ville</label>\n                <select value={formData.city} onChange={(e) => handleCityChange(e.target.value)} className=\"w-full px-3 py-2 border rounded-md\">\n                  {TUNISIA_CITIES.map((city) => (\n                    <option key={city.name} value={city.name}>\n                      {city.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Rayon de detection (m)</label>\n                <Input\n                  type=\"number\"\n                  value={formData.radius}\n                  onChange={(e) => setFormData({ ...formData, radius: parseInt(e.target.value, 10) || 0 })}\n                  required\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Position sur la carte</label>\n              <p className=\"text-xs text-gray-500 mb-2\">Cliquez sur la carte pour selectionner la position exacte</p>\n              <MapComponent\n                prizes={[]}\n                onMapClick={handleMapClick}\n                selectedLocation={selectedLocation}\n                height=\"400px\"\n                center={[formData.latitude, formData.longitude]}\n                zoom={12}\n                showPrizes={false}\n                interactive\n                mode=\"single\"\n                resetToken={mapResetToken}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Latitude</label>\n                <Input\n                  type=\"number\"\n                  step=\"0.0001\"\n                  value={formData.latitude}\n                  onChange={(e) => {\n                    const lat = parseFloat(e.target.value);\n                    setFormData({ ...formData, latitude: lat });\n                    setSelectedLocation({ lat, lng: formData.longitude });\n                  }}\n                  required\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Longitude</label>\n                <Input\n                  type=\"number\"\n                  step=\"0.0001\"\n                  value={formData.longitude}\n                  onChange={(e) => {\n                    const lng = parseFloat(e.target.value);\n                    setFormData({ ...formData, longitude: lng });\n                    setSelectedLocation({ lat: formData.latitude, lng });\n                  }}\n                  required\n                />\n              </div>\n            </div>\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => {\n                  setShowAddDialog(false);\n                  setSelectedLocation(null);\n                  setEditingPrize(null);\n                  setFormData(DEFAULT_FORM);\n                  setMapResetToken((t) => t + 1);\n                }}\n              >\n                Annuler\n              </Button>\n              <Button type=\"submit\">{editingPrize ? 'Mettre a jour' : 'Creer le Prix'}</Button>\n            </div>\n          </form>\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={showBatchDialog} onOpenChange={setShowBatchDialog}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>Ajout en lot (zone circulaire)</DialogTitle>\n            <DialogDescription>\n              Selectionnez une zone sur la carte et configurez le lot. Nous genererons les positions automatiquement.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Nom de base</label>\n              <Input value={batchForm.name} onChange={(e) => setBatchForm({ ...batchForm, name: e.target.value })} placeholder=\"Ex: Coffre promo\" />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Description</label>\n              <Input value={batchForm.description || ''} onChange={(e) => setBatchForm({ ...batchForm, description: e.target.value })} />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Categorie</label>\n              <select value={batchForm.category} onChange={(e) => setBatchForm({ ...batchForm, category: e.target.value })} className=\"w-full px-3 py-2 border rounded-md\">\n                {CATEGORY_OPTIONS.map((c) => (\n                  <option key={c.value} value={c.value}>\n                    {c.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Raret´┐¢</label>\n              <select value={batchForm.rarity} onChange={(e) => setBatchForm({ ...batchForm, rarity: e.target.value })} className=\"w-full px-3 py-2 border rounded-md\">\n                {RARITY_OPTIONS.map((r) => (\n                  <option key={r.value} value={r.value}>\n                    {r.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Type</label>\n              <select value={batchForm.type} onChange={(e) => setBatchForm({ ...batchForm, type: e.target.value })} className=\"w-full px-3 py-2 border rounded-md\">\n                {TYPE_OPTIONS.map((t) => (\n                  <option key={t.value} value={t.value}>\n                    {t.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Animation (Display)</label>\n              <select \n                value={batchForm.displayType || 'standard'} \n                onChange={(e) => setBatchForm({ ...batchForm, displayType: e.target.value })} \n                className=\"w-full px-3 py-2 border rounded-md bg-blue-50\"\n              >\n                {DISPLAY_TYPES.map((t) => (\n                  <option key={t.value} value={t.value}>\n                    {t.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Type de Contenu</label>\n              <select \n                value={batchForm.contentType || 'points'} \n                onChange={(e) => setBatchForm({ ...batchForm, contentType: e.target.value })} \n                className=\"w-full px-3 py-2 border rounded-md\"\n              >\n                {CONTENT_TYPES.map((c) => (\n                  <option key={c.value} value={c.value}>\n                    {c.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Points</label>\n              <Input type=\"number\" value={batchForm.points} onChange={(e) => setBatchForm({ ...batchForm, points: parseInt(e.target.value, 10) || 0 })} />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Nombre de prix</label>\n              <Input type=\"number\" value={batchForm.count} onChange={(e) => setBatchForm({ ...batchForm, count: parseInt(e.target.value, 10) || 1 })} />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Zone de distribution (m)</label>\n              <Input type=\"number\" value={batchForm.areaRadius} onChange={(e) => setBatchForm({ ...batchForm, areaRadius: parseInt(e.target.value, 10) || 500 })} />\n              <p className=\"text-xs text-gray-400 mt-1\">Rayon de la zone ou les prix seront disperses</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">Rayon de detection (m)</label>\n              <Input type=\"number\" min=\"10\" max=\"500\" value={batchForm.prizeRadius} onChange={(e) => setBatchForm({ ...batchForm, prizeRadius: Math.min(500, Math.max(10, parseInt(e.target.value, 10) || 50)) })} />\n              <p className=\"text-xs text-gray-400 mt-1\">Distance pour capturer chaque prix (10-500m)</p>\n            </div>\n            <div className=\"grid grid-cols-2 gap-2\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Latitude</label>\n                <Input type=\"number\" step=\"0.0001\" value={batchForm.latitude} onChange={(e) => setBatchForm({ ...batchForm, latitude: parseFloat(e.target.value) || 0 })} />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Longitude</label>\n                <Input type=\"number\" step=\"0.0001\" value={batchForm.longitude} onChange={(e) => setBatchForm({ ...batchForm, longitude: parseFloat(e.target.value) || 0 })} />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-2 pt-4\">\n            <p className=\"text-sm text-gray-500\">Cliquez une premi´┐¢re fois pour le centre, une seconde fois pour fixer le rayon.</p>\n            <MapComponent\n              prizes={[]}\n              onAreaSelect={(area) => {\n                setBatchArea(area);\n                setBatchPreviews(generateBatchLocations(Number(batchForm.count || 1), { lat: area.center.lat, lng: area.center.lng }, area.radius));\n              }}\n              selectedArea={batchArea}\n              setSelectedArea={setBatchArea}\n              batchPreviews={batchPreviews}\n              height=\"420px\"\n              center={[batchForm.latitude, batchForm.longitude]}\n              zoom={11}\n              showPrizes={false}\n              interactive\n              mode=\"area\"\n            />\n          </div>\n\n          {batchPreviews.length > 0 && (\n            <div className=\"mt-3 p-3 bg-orange-50 border border-orange-200 rounded-md text-sm text-orange-800\">\n              {batchPreviews.length} positions generees. Centre: {batchArea?.center.lat.toFixed(4)}, {batchArea?.center.lng.toFixed(4)} | Rayon: {(batchArea?.radius || 0) / 1000} km\n            </div>\n          )}\n\n          <div className=\"flex justify-end gap-2 pt-4\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => {\n                setShowBatchDialog(false);\n                setBatchArea(null);\n                setBatchPreviews([]);\n              }}\n            >\n              Annuler\n            </Button>\n            <Button onClick={handleBatchSubmit}>Generer et creer</Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Prize Details Dialog */}\n      <Dialog open={showDetailsDialog} onOpenChange={setShowDetailsDialog}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Details du Prix</DialogTitle>\n            <DialogDescription>Informations completes sur le prix selectionne</DialogDescription>\n          </DialogHeader>\n\n          {selectedPrize && (\n            <div className=\"space-y-4\">\n              {/* Header with status */}\n              <div className=\"flex justify-between items-start\">\n                <div>\n                  <h3 className=\"text-xl font-bold\">{selectedPrize.name}</h3>\n                  <p className=\"text-gray-500\">{selectedPrize.description}</p>\n                </div>\n                {getStatusBadge(selectedPrize.status)}\n              </div>\n\n              {/* Main Info Grid */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Points</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <p className=\"text-2xl font-bold text-yellow-600\">{selectedPrize.points}</p>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader className=\"pb-2\">\n                    <CardTitle className=\"text-sm\">Quantite</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <p className=\"text-2xl font-bold\">{selectedPrize.quantity || 1}</p>\n                    <p className=\"text-xs text-gray-500\">Reclames: {selectedPrize.claimedCount || 0}</p>\n                  </CardContent>\n                </Card>\n              </div>\n\n              {/* Classification */}\n              <Card>\n                <CardHeader className=\"pb-2\">\n                  <CardTitle className=\"text-sm\">Classification</CardTitle>\n                </CardHeader>\n                <CardContent className=\"grid grid-cols-3 gap-2\">\n                  <div>\n                    <span className=\"text-xs text-gray-500\">Type</span>\n                    <p className=\"font-medium\">{getTypeLabel(selectedPrize.type)}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-xs text-gray-500\">Categorie</span>\n                    <p className=\"font-medium capitalize\">{selectedPrize.category || 'N/A'}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-xs text-gray-500\">Rarete</span>\n                    <p className=\"font-medium capitalize\">{selectedPrize.rarity || 'common'}</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Location */}\n              <Card>\n                <CardHeader className=\"pb-2\">\n                  <CardTitle className=\"text-sm flex items-center gap-2\">\n                    <MapPin className=\"h-4 w-4 text-blue-500\" />\n                    Localisation\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-2\">\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <span className=\"text-xs text-gray-500\">Ville</span>\n                      <p className=\"font-medium\">{selectedPrize.city || selectedPrize.location?.city || 'Inconnue'}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-xs text-gray-500\">Rayon de detection</span>\n                      <p className=\"font-medium\">{selectedPrize.radius || selectedPrize.location?.radius || 50}m</p>\n                    </div>\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <span className=\"text-xs text-gray-500\">Latitude</span>\n                      <p className=\"font-mono text-sm\">{selectedPrize.latitude || selectedPrize.location?.lat || 'N/A'}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-xs text-gray-500\">Longitude</span>\n                      <p className=\"font-mono text-sm\">{selectedPrize.longitude || selectedPrize.location?.lng || 'N/A'}</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Timestamps */}\n              <Card>\n                <CardHeader className=\"pb-2\">\n                  <CardTitle className=\"text-sm\">Historique</CardTitle>\n                </CardHeader>\n                <CardContent className=\"grid grid-cols-2 gap-2 text-sm\">\n                  <div>\n                    <span className=\"text-xs text-gray-500\">Cree le</span>\n                    <p>{formatDate(selectedPrize.createdAt)}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-xs text-gray-500\">Mis a jour</span>\n                    <p>{formatDate(selectedPrize.updatedAt) || 'N/A'}</p>\n                  </div>\n                  {selectedPrize.expiresAt && (\n                    <div>\n                      <span className=\"text-xs text-gray-500\">Expire le</span>\n                      <p>{formatDate(selectedPrize.expiresAt)}</p>\n                    </div>\n                  )}\n                  {selectedPrize.claimedAt && (\n                    <div>\n                      <span className=\"text-xs text-gray-500\">Reclame le</span>\n                      <p>{formatDate(selectedPrize.claimedAt)}</p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Actions */}\n              <div className=\"flex justify-end gap-2 pt-2\">\n                <Button variant=\"outline\" onClick={() => setShowDetailsDialog(false)}>\n                  Fermer\n                </Button>\n                <Button onClick={() => {\n                  setShowDetailsDialog(false);\n                  handleEditPrize(selectedPrize);\n                }}>\n                  <Edit className=\"mr-2 h-4 w-4\" />\n                  Modifier\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\PromoCodesManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\ReportsManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\RewardsManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\SettingsPage_Complete.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\SystemManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\UsersManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\pages\\__tests__\\AnalyticsPage.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\partner-portal\\PartnerLayout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\partner-portal\\PartnerLogin.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\partner-portal\\PartnerMarketplace.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\partner-portal\\PartnerPortal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\partner-portal\\PartnerRedemptions.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'handleCameraScanResult' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":157,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":157,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState, useCallback, useRef } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '../components/ui/card';\nimport { Button } from '../components/ui/button';\nimport { Input } from '../components/ui/input';\nimport { Badge } from '../components/ui/badge';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '../components/ui/table';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '../components/ui/dialog';\nimport { ScanLine, RefreshCw, Camera, Keyboard, X } from 'lucide-react';\nimport { toast } from 'sonner';\nimport { getPendingRedemptions, scanRedemption } from '../services/redemptions-partner';\nimport { formatDate } from '../utils/dates';\n\nconst statusVariant = {\n  PENDING: 'outline',\n  FULFILLED: 'default',\n  CANCELLED: 'destructive',\n};\n\nexport default function PartnerRedemptions() {\n  const [pending, setPending] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [scanDialog, setScanDialog] = useState(false);\n  const [qrInput, setQrInput] = useState('');\n  const [scanning, setScanning] = useState(false);\n  const [scanMode, setScanMode] = useState('manual'); // 'manual' or 'camera'\n  const [cameraActive, setCameraActive] = useState(false);\n  const [cameraError, setCameraError] = useState(null);\n\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const streamRef = useRef(null);\n  const scanIntervalRef = useRef(null);\n\n  const loadPending = useCallback(async () => {\n    try {\n      setLoading(true);\n      const items = await getPendingRedemptions({ limit: 100 });\n      setPending(items);\n    } catch (error) {\n      const message = error?.message || 'Impossible de r├®cup├®rer les redemptions en attente';\n      toast.error('Chargement impossible', { description: message });\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadPending();\n  }, []);\n\n  // Cleanup camera on unmount or dialog close\n  useEffect(() => {\n    return () => {\n      stopCamera();\n    };\n  }, []);\n\n  const stopCamera = () => {\n    if (scanIntervalRef.current) {\n      clearInterval(scanIntervalRef.current);\n      scanIntervalRef.current = null;\n    }\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    setCameraActive(false);\n  };\n\n  const startCamera = async () => {\n    try {\n      setCameraError(null);\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: { facingMode: 'environment' }\n      });\n\n      streamRef.current = stream;\n\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        videoRef.current.play();\n        setCameraActive(true);\n\n        // Start scanning frames for QR codes\n        scanIntervalRef.current = setInterval(() => {\n          scanVideoFrame();\n        }, 500);\n      }\n    } catch (error) {\n      console.error('Camera access error:', error);\n      setCameraError('Impossible d\\'acc├®der ├á la cam├®ra. Veuillez autoriser l\\'acc├¿s ou utiliser la saisie manuelle.');\n      setScanMode('manual');\n    }\n  };\n\n  const scanVideoFrame = () => {\n    if (!videoRef.current || !canvasRef.current || !cameraActive) return;\n\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    if (video.readyState !== video.HAVE_ENOUGH_DATA) return;\n\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n    // Get image data for QR scanning\n    // Note: In production, use a library like jsQR or html5-qrcode\n    // For now, we provide visual feedback that scanning is active\n    // The actual QR decoding would require a library\n  };\n\n  const handleScanModeChange = async (mode) => {\n    if (mode === 'camera') {\n      setScanMode('camera');\n      await startCamera();\n    } else {\n      stopCamera();\n      setScanMode('manual');\n    }\n  };\n\n  const handleDialogClose = () => {\n    stopCamera();\n    setScanDialog(false);\n    setQrInput('');\n    setScanMode('manual');\n    setCameraError(null);\n  };\n\n  const handleScan = async () => {\n    if (!qrInput.trim()) {\n      toast.error('QR/code manquant', { description: 'Collez le code ou le payload base64 du QR.' });\n      return;\n    }\n\n    try {\n      setScanning(true);\n      const result = await scanRedemption(qrInput.trim());\n      toast.success('Redemption valid├®e', {\n        description: result?.redemption?.id ? `ID ${result.redemption.id}` : 'QR accept├®',\n      });\n      handleDialogClose();\n      loadPending();\n    } catch (error) {\n      toast.error('Validation impossible', {\n        description: error?.message || 'QR invalide ou d├®j├á trait├®',\n      });\n    } finally {\n      setScanning(false);\n    }\n  };\n\n  // Handle camera scan result (when using a QR library)\n  const handleCameraScanResult = async (decodedText) => {\n    stopCamera();\n    setQrInput(decodedText);\n\n    // Auto-validate\n    try {\n      setScanning(true);\n      const result = await scanRedemption(decodedText);\n      toast.success('Redemption valid├®e automatiquement', {\n        description: result?.redemption?.id ? `ID ${result.redemption.id}` : 'QR accept├®',\n      });\n      handleDialogClose();\n      loadPending();\n    } catch (error) {\n      toast.error('Validation impossible', {\n        description: error?.message || 'QR invalide ou d├®j├á trait├®',\n      });\n      // Keep dialog open for retry\n      setScanning(false);\n    }\n  };\n\n  const renderRows = () => {\n    if (!pending || pending.length === 0) {\n      return (\n        <TableRow>\n          <TableCell colSpan={5} className=\"text-center text-gray-500 py-6\">\n            {loading ? 'Chargement...' : 'Aucune redemption en attente'}\n          </TableCell>\n        </TableRow>\n      );\n    }\n\n    return pending.map((item) => (\n      <TableRow key={item.id}>\n        <TableCell>\n          <div className=\"font-medium\">{item.user?.displayName || 'Joueur'}</div>\n          <div className=\"text-xs text-gray-500\">{item.user?.email}</div>\n        </TableCell>\n        <TableCell>\n          <div className=\"font-medium\">{item.reward?.name || 'R├®compense'}</div>\n          <div className=\"text-xs text-gray-500\">{item.reward?.category || 'ÔÇö'}</div>\n        </TableCell>\n        <TableCell>\n          <div className=\"text-sm\">{item.reward?.partnerId?.name || 'Partenaire'}</div>\n        </TableCell>\n        <TableCell>\n          <Badge variant={statusVariant[String(item.status || 'PENDING').toUpperCase()] || 'secondary'}>\n            {item.status || 'PENDING'}\n          </Badge>\n        </TableCell>\n        <TableCell className=\"text-sm text-gray-600\">\n          {item.createdAt ? formatDate(item.createdAt) : 'ÔÇö'}\n        </TableCell>\n      </TableRow>\n    ));\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-start justify-between gap-3 flex-wrap\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Validations partenaires</h1>\n          <p className=\"text-gray-600\">Suivi des redemptions ├á valider et scan des QR codes.</p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button variant=\"outline\" onClick={loadPending} disabled={loading}>\n            <RefreshCw className={`h-4 w-4 mr-2 ${loading ? 'animate-spin' : ''}`} />\n            Actualiser\n          </Button>\n          <Button onClick={() => setScanDialog(true)}>\n            <ScanLine className=\"h-4 w-4 mr-2\" />\n            Scanner / Valider\n          </Button>\n        </div>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Redemptions en attente</CardTitle>\n          <CardDescription>\n            Affichage limit├® aux r├®compenses li├®es ├á votre partenaire si vous ├¬tes connect├® en tant que partenaire.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"rounded-md border\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Joueur</TableHead>\n                  <TableHead>R├®compense</TableHead>\n                  <TableHead>Partenaire</TableHead>\n                  <TableHead>Statut</TableHead>\n                  <TableHead>Cr├®├®e le</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>{renderRows()}</TableBody>\n            </Table>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Dialog open={scanDialog} onOpenChange={(open) => !open && handleDialogClose()}>\n        <DialogContent className=\"max-w-lg\">\n          <DialogHeader>\n            <DialogTitle>Scanner un QR / saisir un code</DialogTitle>\n            <DialogDescription>\n              Utilisez la cam├®ra pour scanner le QR code ou saisissez-le manuellement.\n            </DialogDescription>\n          </DialogHeader>\n\n          {/* Mode Toggle */}\n          <div className=\"flex gap-2 mb-4\">\n            <Button\n              variant={scanMode === 'manual' ? 'default' : 'outline'}\n              className=\"flex-1\"\n              onClick={() => handleScanModeChange('manual')}\n            >\n              <Keyboard className=\"h-4 w-4 mr-2\" />\n              Saisie manuelle\n            </Button>\n            <Button\n              variant={scanMode === 'camera' ? 'default' : 'outline'}\n              className=\"flex-1\"\n              onClick={() => handleScanModeChange('camera')}\n            >\n              <Camera className=\"h-4 w-4 mr-2\" />\n              Cam├®ra\n            </Button>\n          </div>\n\n          <div className=\"space-y-3\">\n            {scanMode === 'camera' ? (\n              <div className=\"space-y-3\">\n                {cameraError ? (\n                  <div className=\"p-4 bg-red-50 border border-red-200 rounded-md text-red-600 text-sm\">\n                    {cameraError}\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"relative aspect-video bg-black rounded-md overflow-hidden\">\n                      <video\n                        ref={videoRef}\n                        className=\"w-full h-full object-cover\"\n                        playsInline\n                        muted\n                      />\n                      {cameraActive && (\n                        <div className=\"absolute inset-0 border-2 border-dashed border-white/50 m-8 rounded-lg pointer-events-none\" />\n                      )}\n                      {!cameraActive && (\n                        <div className=\"absolute inset-0 flex items-center justify-center text-white\">\n                          <RefreshCw className=\"h-8 w-8 animate-spin\" />\n                        </div>\n                      )}\n                    </div>\n                    <canvas ref={canvasRef} className=\"hidden\" />\n                    <p className=\"text-xs text-gray-500 text-center\">\n                      Placez le QR code devant la cam├®ra. La validation sera automatique.\n                    </p>\n                    {/* Manual input fallback when camera is active */}\n                    <div className=\"pt-2 border-t\">\n                      <p className=\"text-xs text-gray-500 mb-2\">Ou collez le code manuellement :</p>\n                      <Input\n                        placeholder=\"Payload base64 du QR ou code alphanum├®rique\"\n                        value={qrInput}\n                        onChange={(e) => setQrInput(e.target.value)}\n                      />\n                    </div>\n                  </>\n                )}\n              </div>\n            ) : (\n              <>\n                <Input\n                  placeholder=\"Payload base64 du QR ou code alphanum├®rique\"\n                  value={qrInput}\n                  onChange={(e) => setQrInput(e.target.value)}\n                  className=\"font-mono\"\n                />\n                <p className=\"text-xs text-gray-500\">\n                  Les partenaires ne peuvent valider que leurs propres r├®compenses. Un code d├®j├á utilis├® sera refus├®.\n                </p>\n              </>\n            )}\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={handleDialogClose} disabled={scanning}>\n              Annuler\n            </Button>\n            <Button onClick={handleScan} disabled={scanning || !qrInput.trim()}>\n              {scanning ? 'Validation...' : 'Valider'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\schemas\\marketplace-validation.js","messages":[{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'validateMarketplaceItem'.","line":181,"column":3,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":181,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Marketplace Form Validation Schema\n * Ensures consistency between admin forms and backend validation\n * Pure JavaScript implementation (no external dependencies)\n */\n\nconst VALID_CATEGORIES = ['voucher', 'gift_card', 'physical', 'digital', 'experience'];\n\n/**\n * Validate marketplace item data\n * @param {object} data - Form data to validate\n * @returns {object} {isValid: boolean, errors: object}\n */\nexport const validateMarketplaceItem = (data) => {\n  const errors = {};\n\n  // Name validation\n  if (!data.name || typeof data.name !== 'string') {\n    errors.name = 'Item name is required';\n  } else {\n    const trimmed = data.name.trim();\n    if (trimmed.length === 0) {\n      errors.name = 'Item name is required';\n    } else if (trimmed.length > 100) {\n      errors.name = 'Item name cannot exceed 100 characters';\n    }\n  }\n\n  // Description validation\n  if (!data.description || typeof data.description !== 'string') {\n    errors.description = 'Description is required';\n  } else {\n    const trimmed = data.description.trim();\n    if (trimmed.length === 0) {\n      errors.description = 'Description is required';\n    } else if (trimmed.length > 500) {\n      errors.description = 'Description cannot exceed 500 characters';\n    }\n  }\n\n  // Category validation\n  if (!data.category) {\n    errors.category = 'Category is required';\n  } else if (!VALID_CATEGORIES.includes(data.category)) {\n    errors.category = 'Valid category is required';\n  }\n\n  // Points cost validation\n  if (data.pointsCost === undefined || data.pointsCost === null) {\n    errors.pointsCost = 'Points cost is required';\n  } else {\n    const cost = Number(data.pointsCost);\n    if (!Number.isFinite(cost)) {\n      errors.pointsCost = 'Points cost must be a number';\n    } else if (!Number.isInteger(cost)) {\n      errors.pointsCost = 'Points cost must be a whole number';\n    } else if (cost < 1) {\n      errors.pointsCost = 'Points cost must be at least 1';\n    } else if (cost > 999999) {\n      errors.pointsCost = 'Points cost cannot exceed 999,999';\n    }\n  }\n\n  // Stock quantity validation\n  if (data.stockQuantity === undefined || data.stockQuantity === null) {\n    errors.stockQuantity = 'Stock quantity is required';\n  } else {\n    const qty = Number(data.stockQuantity);\n    if (!Number.isFinite(qty)) {\n      errors.stockQuantity = 'Stock quantity must be a number';\n    } else if (!Number.isInteger(qty)) {\n      errors.stockQuantity = 'Stock quantity must be a whole number';\n    } else if (qty < 0) {\n      errors.stockQuantity = 'Stock quantity cannot be negative';\n    } else if (qty > 999999) {\n      errors.stockQuantity = 'Stock quantity cannot exceed 999,999';\n    }\n  }\n\n  // Stock available validation\n  if (data.stockAvailable === undefined || data.stockAvailable === null) {\n    errors.stockAvailable = 'Available stock is required';\n  } else {\n    const avail = Number(data.stockAvailable);\n    if (!Number.isFinite(avail)) {\n      errors.stockAvailable = 'Available stock must be a number';\n    } else if (!Number.isInteger(avail)) {\n      errors.stockAvailable = 'Available stock must be a whole number';\n    } else if (avail < 0) {\n      errors.stockAvailable = 'Available stock cannot be negative';\n    } else if (avail > 999999) {\n      errors.stockAvailable = 'Available stock cannot exceed 999,999';\n    } else if (avail > Number(data.stockQuantity || 0)) {\n      errors.stockAvailable = 'Available stock cannot exceed total quantity';\n    }\n  }\n\n  // Image URL validation\n  if (data.imageUrl && typeof data.imageUrl === 'string' && data.imageUrl.trim()) {\n    if (!isValidUrl(data.imageUrl)) {\n      errors.imageUrl = 'Image URL must be valid';\n    }\n  }\n\n  // Sponsored data validation\n  if (data.isSponsored) {\n    if (!data.partnerId || typeof data.partnerId !== 'string') {\n      errors.partnerId = 'Partner is required when item is sponsored';\n    }\n    if (!data.sponsorName || typeof data.sponsorName !== 'string') {\n      errors.sponsorName = 'Sponsor name is required when item is sponsored';\n    }\n    if (data.sponsorLogo && typeof data.sponsorLogo === 'string' && data.sponsorLogo.trim()) {\n      if (!isValidUrl(data.sponsorLogo)) {\n        errors.sponsorLogo = 'Sponsor logo must be a valid URL';\n      }\n    }\n    if (data.sponsorNotes && typeof data.sponsorNotes === 'string' && data.sponsorNotes.length > 500) {\n      errors.sponsorNotes = 'Sponsor notes cannot exceed 500 characters';\n    }\n  }\n\n  return {\n    isValid: Object.keys(errors).length === 0,\n    data: Object.keys(errors).length === 0 ? data : null,\n    errors,\n  };\n};\n\n/**\n * Helper: Check if string is valid URL\n * @param {string} str - URL to validate\n * @returns {boolean}\n */\nfunction isValidUrl(str) {\n  try {\n    new URL(str);\n    return true;\n  } catch {\n    return false;\n  }\n}\n/**\n * Get field-specific error messages\n * @param {string} fieldName - Name of the field\n * @param {object} errors - Validation errors object\n * @returns {string|null} Error message or null\n */\nexport const getFieldError = (fieldName, errors) => {\n  return errors[fieldName] || null;\n};\n\n/**\n * Check if stock is valid\n * @param {number} available - Available stock\n * @param {number} quantity - Total quantity\n * @returns {boolean} True if valid\n */\nexport const isStockValid = (available, quantity) => {\n  return (\n    Number.isFinite(available) &&\n    Number.isFinite(quantity) &&\n    available >= 0 &&\n    quantity >= 0 &&\n    available <= quantity\n  );\n};\n\n/**\n * Check if sponsored data is complete\n * @param {object} data - Form data\n * @returns {boolean} True if valid\n */\nexport const isSponsoredDataValid = (data) => {\n  if (!data.isSponsored) return true;\n  return !!(data.partnerId && data.sponsorName);\n};\n\nexport default {\n  validateMarketplaceItem,\n  validateMarketplaceItem,\n  getFieldError,\n  isStockValid,\n  isSponsoredDataValid,\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\abTesting.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\achievements.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\activity.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\admob.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\analytics.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\analyticsAggregation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\antiCheat.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\api.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\auth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\claims.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\dashboard.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\deviceTokens.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\distribution.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\friendships.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\gameControl.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\geo.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\marketplace.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\mockApi.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\notifications.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\offlineQueue.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\partnerMarketplace.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\partners.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\powerUps.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\prizes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\promoCodes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\redemptions-partner.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\redemptions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\reports.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\rewards.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\settings.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\system.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\users.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\validation.js","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\(.","line":14,"column":77,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":14,"endColumn":78,"suggestions":[{"messageId":"removeEscape","fix":{"range":[547,548],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[547,547],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\).","line":14,"column":79,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":14,"endColumn":80,"suggestions":[{"messageId":"removeEscape","fix":{"range":[549,550],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[549,549],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const validateUser = (userData) => {\r\n  const errors = [];\r\n  \r\n  // Validate required fields\r\n  if (!userData.name || typeof userData.name !== 'string' || userData.name.trim().length === 0) {\r\n    errors.push('Name is required and must be a non-empty string');\r\n  }\r\n  \r\n  if (!userData.email || typeof userData.email !== 'string' || !isValidEmail(userData.email)) {\r\n    errors.push('Valid email is required');\r\n  }\r\n  \r\n  // Validate optional fields with constraints\r\n  if (userData.phone && (typeof userData.phone !== 'string' || !/^\\+?[\\d\\s\\-\\(\\)]{10,}$/.test(userData.phone))) {\r\n    errors.push('Phone number must be a valid format');\r\n  }\r\n  \r\n  if (userData.city && typeof userData.city !== 'string') {\r\n    errors.push('City must be a string');\r\n  }\r\n  \r\n  if (userData.level && !['Bronze', 'Silver', 'Gold', 'Platinum', 'Diamond'].includes(userData.level)) {\r\n    errors.push('Level must be one of: Bronze, Silver, Gold, Platinum, Diamond');\r\n  }\r\n  \r\n  if (userData.status && !['active', 'inactive', 'banned'].includes(userData.status)) {\r\n    errors.push('Status must be one of: active, inactive, banned');\r\n  }\r\n  \r\n  if (userData.totalPoints !== undefined && (typeof userData.totalPoints !== 'number' || userData.totalPoints < 0)) {\r\n    errors.push('Total points must be a non-negative number');\r\n  }\r\n  \r\n  if (userData.availablePoints !== undefined && (typeof userData.availablePoints !== 'number' || userData.availablePoints < 0)) {\r\n    errors.push('Available points must be a non-negative number');\r\n  }\r\n  \r\n  if (userData.prizesClaimed !== undefined && (typeof userData.prizesClaimed !== 'number' || userData.prizesClaimed < 0)) {\r\n    errors.push('Prizes claimed must be a non-negative number');\r\n  }\r\n  \r\n  if (userData.lastActive && !isValidDate(userData.lastActive)) {\r\n    errors.push('Last active must be a valid date');\r\n  }\r\n  \r\n  if (userData.joinedAt && !isValidDate(userData.joinedAt)) {\r\n    errors.push('Joined at must be a valid date');\r\n  }\r\n  \r\n  if (userData.isActive !== undefined && typeof userData.isActive !== 'boolean') {\r\n    errors.push('isActive must be a boolean');\r\n  }\r\n  \r\n  if (userData.isBanned !== undefined && typeof userData.isBanned !== 'boolean') {\r\n    errors.push('isBanned must be a boolean');\r\n  }\r\n  \r\n  if (userData.totalPointsEarned !== undefined && (typeof userData.totalPointsEarned !== 'number' || userData.totalPointsEarned < 0)) {\r\n    errors.push('Total points earned must be a non-negative number');\r\n  }\r\n  \r\n  if (userData.totalPointsSpent !== undefined && (typeof userData.totalPointsSpent !== 'number' || userData.totalPointsSpent < 0)) {\r\n    errors.push('Total points spent must be a non-negative number');\r\n  }\r\n  \r\n  if (userData.prizesCaptured !== undefined && (typeof userData.prizesCaptured !== 'number' || userData.prizesCaptured < 0)) {\r\n    errors.push('Prizes captured must be a non-negative number');\r\n  }\r\n  \r\n  if (userData.rewardsRedeemed !== undefined && (typeof userData.rewardsRedeemed !== 'number' || userData.rewardsRedeemed < 0)) {\r\n    errors.push('Rewards redeemed must be a non-negative number');\r\n  }\r\n  \r\n  if (userData.displayName && typeof userData.displayName !== 'string') {\r\n    errors.push('Display name must be a string');\r\n  }\r\n  \r\n  if (userData.referralCode && typeof userData.referralCode !== 'string') {\r\n    errors.push('Referral code must be a string');\r\n  }\r\n  \r\n  if (userData.createdAt && !isValidDate(userData.createdAt)) {\r\n    errors.push('Created at must be a valid date');\r\n  }\r\n  \r\n  return {\r\n    isValid: errors.length === 0,\r\n    errors\r\n  };\r\n};\r\n\r\nconst validatePrize = (prizeData) => {\r\n  const errors = [];\r\n  \r\n  // Validate required fields\r\n  if (!prizeData.name || typeof prizeData.name !== 'string' || prizeData.name.trim().length === 0) {\r\n    errors.push('Prize name is required and must be a non-empty string');\r\n  }\r\n  \r\n  if (!prizeData.description || typeof prizeData.description !== 'string') {\r\n    errors.push('Prize description is required and must be a string');\r\n  }\r\n  \r\n  if (prizeData.pointsReward === undefined && prizeData.pointsRequired === undefined) {\r\n    errors.push('Either pointsReward or pointsRequired must be provided');\r\n  }\r\n  \r\n  if (prizeData.pointsReward !== undefined && (typeof prizeData.pointsReward !== 'number' || prizeData.pointsReward < 0)) {\r\n    errors.push('Points reward must be a non-negative number');\r\n  }\r\n  \r\n  if (prizeData.pointsRequired !== undefined && (typeof prizeData.pointsRequired !== 'number' || prizeData.pointsRequired < 0)) {\r\n    errors.push('Points required must be a non-negative number');\r\n  }\r\n  \r\n  if (prizeData.quantity === undefined || typeof prizeData.quantity !== 'number' || prizeData.quantity <= 0) {\r\n    errors.push('Quantity must be a positive number');\r\n  }\r\n  \r\n  // Validate optional fields\r\n  if (prizeData.type && !['physical', 'digital', 'voucher', 'mystery'].includes(prizeData.type)) {\r\n    errors.push('Type must be one of: physical, digital, voucher, mystery');\r\n  }\r\n  \r\n  if (prizeData.category && typeof prizeData.category !== 'string') {\r\n    errors.push('Category must be a string');\r\n  }\r\n  \r\n  if (prizeData.imageUrl && typeof prizeData.imageUrl !== 'string') {\r\n    errors.push('Image URL must be a string');\r\n  }\r\n  \r\n  if (prizeData.value !== undefined && (typeof prizeData.value !== 'number' || prizeData.value < 0)) {\r\n    errors.push('Value must be a non-negative number');\r\n  }\r\n  \r\n  if (prizeData.available !== undefined && typeof prizeData.available !== 'number') {\r\n    errors.push('Available must be a number');\r\n  }\r\n  \r\n  if (prizeData.isActive !== undefined && typeof prizeData.isActive !== 'boolean') {\r\n    errors.push('isActive must be a boolean');\r\n  }\r\n  \r\n  if (prizeData.isFeatured !== undefined && typeof prizeData.isFeatured !== 'boolean') {\r\n    errors.push('isFeatured must be a boolean');\r\n  }\r\n  \r\n  if (prizeData.capturedCount !== undefined && typeof prizeData.capturedCount !== 'number') {\r\n    errors.push('capturedCount must be a number');\r\n  }\r\n  \r\n  if (prizeData.viewCount !== undefined && typeof prizeData.viewCount !== 'number') {\r\n    errors.push('viewCount must be a number');\r\n  }\r\n  \r\n  if (prizeData.zone && typeof prizeData.zone === 'object') {\r\n    if (prizeData.zone.value && typeof prizeData.zone.value !== 'string') {\r\n      errors.push('Zone value must be a string');\r\n    }\r\n    if (prizeData.zone.coordinates) {\r\n      if (typeof prizeData.zone.coordinates !== 'object' || \r\n          typeof prizeData.zone.coordinates.lat !== 'number' || \r\n          typeof prizeData.zone.coordinates.lng !== 'number') {\r\n        errors.push('Zone coordinates must have numeric lat and lng properties');\r\n      }\r\n    }\r\n  }\r\n  \r\n  if (prizeData.tags !== undefined && !Array.isArray(prizeData.tags)) {\r\n    errors.push('Tags must be an array');\r\n  }\r\n  \r\n  return {\r\n    isValid: errors.length === 0,\r\n    errors\r\n  };\r\n};\r\n\r\nconst validateReward = (rewardData) => {\r\n  const errors = [];\r\n  \r\n  // Validate required fields\r\n  if (!rewardData.name || typeof rewardData.name !== 'string' || rewardData.name.trim().length === 0) {\r\n    errors.push('Reward name is required and must be a non-empty string');\r\n  }\r\n  \r\n  if (!rewardData.description || typeof rewardData.description !== 'string') {\r\n    errors.push('Reward description is required and must be a string');\r\n  }\r\n  \r\n  if (rewardData.pointsRequired === undefined || typeof rewardData.pointsRequired !== 'number' || rewardData.pointsRequired < 0) {\r\n    errors.push('Points required must be a non-negative number');\r\n  }\r\n  \r\n  if (rewardData.quantity === undefined || typeof rewardData.quantity !== 'number' || rewardData.quantity < 0) {\r\n    errors.push('Quantity must be a non-negative number');\r\n  }\r\n  \r\n  // Validate optional fields\r\n  if (rewardData.type && !['voucher', 'physical', 'digital'].includes(rewardData.type)) {\r\n    errors.push('Type must be one of: voucher, physical, digital');\r\n  }\r\n  \r\n  if (rewardData.category && typeof rewardData.category !== 'string') {\r\n    errors.push('Category must be a string');\r\n  }\r\n  \r\n  if (rewardData.imageUrl && typeof rewardData.imageUrl !== 'string') {\r\n    errors.push('Image URL must be a string');\r\n  }\r\n  \r\n  if (rewardData.value !== undefined && (typeof rewardData.value !== 'number' || rewardData.value < 0)) {\r\n    errors.push('Value must be a non-negative number');\r\n  }\r\n  \r\n  if (rewardData.provider && typeof rewardData.provider !== 'string') {\r\n    errors.push('Provider must be a string');\r\n  }\r\n  \r\n  if (rewardData.validityPeriod !== undefined && (typeof rewardData.validityPeriod !== 'number' || rewardData.validityPeriod < 0)) {\r\n    errors.push('Validity period must be a non-negative number');\r\n  }\r\n  \r\n  if (rewardData.isActive !== undefined && typeof rewardData.isActive !== 'boolean') {\r\n    errors.push('isActive must be a boolean');\r\n  }\r\n  \r\n  if (rewardData.available !== undefined && typeof rewardData.available !== 'number') {\r\n    errors.push('Available must be a number');\r\n  }\r\n  \r\n  if (rewardData.redeemedCount !== undefined && typeof rewardData.redeemedCount !== 'number') {\r\n    errors.push('Redeemed count must be a number');\r\n  }\r\n  \r\n  return {\r\n    isValid: errors.length === 0,\r\n    errors\r\n  };\r\n};\r\n\r\nconst validateCapture = (captureData) => {\r\n  const errors = [];\r\n  \r\n  // Validate required fields\r\n  if (!captureData.userId || typeof captureData.userId !== 'string' || captureData.userId.trim().length === 0) {\r\n    errors.push('User ID is required and must be a non-empty string');\r\n  }\r\n  \r\n  if (!captureData.prizeId || typeof captureData.prizeId !== 'string' || captureData.prizeId.trim().length === 0) {\r\n    errors.push('Prize ID is required and must be a non-empty string');\r\n  }\r\n  \r\n  if (!captureData.captureTime || !isValidDate(captureData.captureTime)) {\r\n    errors.push('Capture time is required and must be a valid date');\r\n  }\r\n  \r\n  // Validate optional fields\r\n  if (captureData.location && typeof captureData.location !== 'string') {\r\n    errors.push('Location must be a string');\r\n  }\r\n  \r\n  if (captureData.pointsEarned !== undefined && (typeof captureData.pointsEarned !== 'number' || captureData.pointsEarned < 0)) {\r\n    errors.push('Points earned must be a non-negative number');\r\n  }\r\n  \r\n  if (captureData.prizeValue !== undefined && (typeof captureData.prizeValue !== 'number' || captureData.prizeValue < 0)) {\r\n    errors.push('Prize value must be a non-negative number');\r\n  }\r\n  \r\n  if (captureData.isRedeemed !== undefined && typeof captureData.isRedeemed !== 'boolean') {\r\n    errors.push('isRedeemed must be a boolean');\r\n  }\r\n  \r\n  return {\r\n    isValid: errors.length === 0,\r\n    errors\r\n  };\r\n};\r\n\r\nconst validateRedemption = (redemptionData) => {\r\n  const errors = [];\r\n  \r\n  // Validate required fields\r\n  if (!redemptionData.userId || typeof redemptionData.userId !== 'string' || redemptionData.userId.trim().length === 0) {\r\n    errors.push('User ID is required and must be a non-empty string');\r\n  }\r\n  \r\n  if (!redemptionData.rewardId || typeof redemptionData.rewardId !== 'string' || redemptionData.rewardId.trim().length === 0) {\r\n    errors.push('Reward ID is required and must be a non-empty string');\r\n  }\r\n  \r\n  if (!redemptionData.redemptionTime || !isValidDate(redemptionData.redemptionTime)) {\r\n    errors.push('Redemption time is required and must be a valid date');\r\n  }\r\n  \r\n  if (!redemptionData.status || !['pending', 'completed', 'cancelled'].includes(redemptionData.status)) {\r\n    errors.push('Status must be one of: pending, completed, cancelled');\r\n  }\r\n  \r\n  // Validate optional fields\r\n  if (redemptionData.pointsUsed !== undefined && (typeof redemptionData.pointsUsed !== 'number' || redemptionData.pointsUsed < 0)) {\r\n    errors.push('Points used must be a non-negative number');\r\n  }\r\n  \r\n  if (redemptionData.value !== undefined && (typeof redemptionData.value !== 'number' || redemptionData.value < 0)) {\r\n    errors.push('Value must be a non-negative number');\r\n  }\r\n  \r\n  if (redemptionData.redeemedByAdmin !== undefined && typeof redemptionData.redeemedByAdmin !== 'boolean') {\r\n    errors.push('redeemedByAdmin must be a boolean');\r\n  }\r\n  \r\n  if (redemptionData.trackingNumber && typeof redemptionData.trackingNumber !== 'string') {\r\n    errors.push('Tracking number must be a string');\r\n  }\r\n  \r\n  return {\r\n    isValid: errors.length === 0,\r\n    errors\r\n  };\r\n};\r\n\r\n// Helper functions\r\nconst isValidEmail = (email) => {\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return emailRegex.test(email);\r\n};\r\n\r\nconst isValidDate = (dateString) => {\r\n  const date = new Date(dateString);\r\n  return !isNaN(date.getTime());\r\n};\r\n\r\n// Export validation functions\r\nexport {\r\n  validateUser,\r\n  validatePrize,\r\n  validateReward,\r\n  validateCapture,\r\n  validateRedemption\r\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\services\\websocket.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\utils\\dates.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\utils\\geo.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\utils\\mappers.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\MSI\\Desktop\\YALLACATCH VERSION 3.0\\yallacatch-final-with-admob\\yallacatch-clean\\admin\\src\\utils\\time-formatter.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
