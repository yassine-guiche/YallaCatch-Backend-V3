{
  "info": {
    "name": "YallaCatch API v2.0",
    "description": "Collection compl√®te des endpoints YallaCatch v2.0\n\n**Base URL**: http://localhost:3000/api/v1\n\n**Authentication**: Bearer Token (JWT)\n\n**Credentials de test**:\n- Admin: admin@yallacatch.com / Admin123!\n- User: user1@test.com / User123!",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "yallacatch"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api/v1",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "prizeId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "1. Authentication",
      "item": [
        {
          "name": "Guest Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', jsonData.data.tokens.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', jsonData.data.tokens.refreshToken);",
                  "    pm.collectionVariables.set('userId', jsonData.data.user.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"deviceId\": \"test-device-001\",\n  \"platform\": \"Web\",\n  \"fcmToken\": \"test-fcm-token\",\n  \"location\": {\n    \"lat\": 25.2048,\n    \"lng\": 55.2708,\n    \"city\": \"Dubai\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/guest",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "guest"]
            },
            "description": "Login as guest user (no credentials required)"
          },
          "response": []
        },
        {
          "name": "Email Login (Admin)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', jsonData.data.tokens.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', jsonData.data.tokens.refreshToken);",
                  "    pm.collectionVariables.set('userId', jsonData.data.user.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@yallacatch.com\",\n  \"password\": \"Admin123!\",\n  \"deviceId\": \"test-device-001\",\n  \"platform\": \"Web\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Login with email and password"
          },
          "response": []
        },
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "profile"]
            },
            "description": "Get current user profile (requires authentication)"
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            },
            "description": "Refresh access token using refresh token"
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            },
            "description": "Logout current user"
          },
          "response": []
        }
      ]
    },
    {
      "name": "2. Prizes",
      "item": [
        {
          "name": "Get Nearby Prizes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/prizes/nearby?latitude=25.2048&longitude=55.2708&radius=5",
              "host": ["{{baseUrl}}"],
              "path": ["prizes", "nearby"],
              "query": [
                {
                  "key": "latitude",
                  "value": "25.2048"
                },
                {
                  "key": "longitude",
                  "value": "55.2708"
                },
                {
                  "key": "radius",
                  "value": "5"
                }
              ]
            },
            "description": "Get prizes near user location (radius in km)"
          },
          "response": []
        },
        {
          "name": "Get All Prizes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/prizes",
              "host": ["{{baseUrl}}"],
              "path": ["prizes"]
            },
            "description": "Get all prizes (admin only)"
          },
          "response": []
        },
        {
          "name": "Get Prize by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/prizes/{{prizeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["prizes", "{{prizeId}}"]
            },
            "description": "Get prize details by ID"
          },
          "response": []
        },
        {
          "name": "Create Prize (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Prize\",\n  \"description\": \"A test prize\",\n  \"type\": \"physical\",\n  \"rarity\": \"common\",\n  \"value\": 100,\n  \"location\": {\n    \"city\": \"Dubai\",\n    \"coordinates\": [55.2708, 25.2048]\n  },\n  \"expiresAt\": \"2025-12-31T23:59:59Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/prizes",
              "host": ["{{baseUrl}}"],
              "path": ["prizes"]
            },
            "description": "Create a new prize (admin only)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "3. Claims",
      "item": [
        {
          "name": "Claim Prize (POINTS)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prizeId\": \"{{prizeId}}\",\n  \"latitude\": 25.2048,\n  \"longitude\": 55.2708,\n  \"claimType\": \"POINTS\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/claims",
              "host": ["{{baseUrl}}"],
              "path": ["claims"]
            },
            "description": "Claim a prize for points"
          },
          "response": []
        },
        {
          "name": "Claim Prize (REWARD)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prizeId\": \"{{prizeId}}\",\n  \"latitude\": 25.2048,\n  \"longitude\": 55.2708,\n  \"claimType\": \"REWARD\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/claims",
              "host": ["{{baseUrl}}"],
              "path": ["claims"]
            },
            "description": "Claim a prize for direct reward"
          },
          "response": []
        },
        {
          "name": "Claim Prize (HYBRID)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prizeId\": \"{{prizeId}}\",\n  \"latitude\": 25.2048,\n  \"longitude\": 55.2708,\n  \"claimType\": \"HYBRID\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/claims",
              "host": ["{{baseUrl}}"],
              "path": ["claims"]
            },
            "description": "Claim a prize for both points and reward"
          },
          "response": []
        },
        {
          "name": "Get My Claims",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/claims",
              "host": ["{{baseUrl}}"],
              "path": ["claims"]
            },
            "description": "Get all claims for current user"
          },
          "response": []
        }
      ]
    },
    {
      "name": "4. Marketplace",
      "item": [
        {
          "name": "Get Marketplace Items",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/marketplace",
              "host": ["{{baseUrl}}"],
              "path": ["marketplace"]
            },
            "description": "Get all marketplace items"
          },
          "response": []
        },
        {
          "name": "Purchase Item",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"itemId\": \"marketplace-item-id\",\n  \"quantity\": 1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/marketplace/purchase",
              "host": ["{{baseUrl}}"],
              "path": ["marketplace", "purchase"]
            },
            "description": "Purchase a marketplace item with points"
          },
          "response": []
        }
      ]
    },
    {
      "name": "5. AR Session",
      "item": [
        {
          "name": "Start AR Session",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"latitude\": 25.2048,\n  \"longitude\": 55.2708,\n  \"deviceInfo\": {\n    \"model\": \"iPhone 14\",\n    \"os\": \"iOS 17\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/ar/session",
              "host": ["{{baseUrl}}"],
              "path": ["ar", "session"]
            },
            "description": "Start a new AR session"
          },
          "response": []
        },
        {
          "name": "Capture Prize in AR",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sessionId\": \"ar-session-id\",\n  \"prizeId\": \"{{prizeId}}\",\n  \"latitude\": 25.2048,\n  \"longitude\": 55.2708\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/ar/capture",
              "host": ["{{baseUrl}}"],
              "path": ["ar", "capture"]
            },
            "description": "Capture a prize in AR mode"
          },
          "response": []
        }
      ]
    },
    {
      "name": "6. Offline Sync",
      "item": [
        {
          "name": "Sync Offline Data",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"actions\": [\n    {\n      \"type\": \"CLAIM\",\n      \"prizeId\": \"{{prizeId}}\",\n      \"timestamp\": \"2025-11-15T10:00:00Z\",\n      \"data\": {\n        \"latitude\": 25.2048,\n        \"longitude\": 55.2708\n      }\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/offline/sync",
              "host": ["{{baseUrl}}"],
              "path": ["offline", "sync"]
            },
            "description": "Sync offline actions when back online"
          },
          "response": []
        }
      ]
    },
    {
      "name": "7. Notifications",
      "item": [
        {
          "name": "Get My Notifications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications",
              "host": ["{{baseUrl}}"],
              "path": ["notifications"]
            },
            "description": "Get all notifications for current user"
          },
          "response": []
        },
        {
          "name": "Mark as Read",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications/notification-id/read",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "notification-id", "read"]
            },
            "description": "Mark a notification as read"
          },
          "response": []
        },
        {
          "name": "Send Push Notification (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"New Prize Available!\",\n  \"body\": \"A new prize is available near you\",\n  \"userId\": \"{{userId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/notifications/send",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "send"]
            },
            "description": "Send push notification (admin only)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "8. Admin",
      "item": [
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            },
            "description": "Get all users (admin only)"
          },
          "response": []
        },
        {
          "name": "Get System Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/stats",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "stats"]
            },
            "description": "Get system statistics (admin only)"
          },
          "response": []
        }
      ]
    }
  ]
}

